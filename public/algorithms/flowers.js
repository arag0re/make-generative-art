let p="ffcf9ffbbbf7b733550f0b3f".match(/.{1}/g).map(c=>(parseInt(c,16)-7.5)/32);let rd=tokenData.hash.substr(2).match(/.{1}/g).map(c=>parseInt(c,16));let tm="244423275bb23f331433".match(/.{1}/g).map(c=>parseInt(c,16));let ri=0;let d,w;let t=tm.map(m=>rn(m+1));let lw=[.66,1,1.5];function rn(a){return rd[ri++%64]%a}function g(x){return x>=.0031?1.055*pow(x,1/2.4)-.055:12.9*x}function o(L,a,b,t){let K=L+.4*a+.2*b;let M=L-.1*a-.06*b;let S=L-.1*a-1.3*b;let l=K**3;let m=M**3;let s=S**3;return color(g(4.1*l-3.3*m+.23*s),g(-1.3*l+2.6*m-.34*s),g(-.004*l-.7*m+1.7*s),t)}function setup(){d=min(window.innerWidth,window.innerHeight);createCanvas(d,d);w=width/2;colorMode(RGB,1);strokeCap(SQUARE);noFill();P=TWO_PI;a=(2+t[0])*.15;b=d*.95;N=5+t[1]*2;r=new Array(N);r0=new Array(N);pk=[1,1.07,1.07,1.07,1.15][t[2]];L=[1,2,2,2,3][t[3]];S=L>1?t[18]<1:false;dc=b/1200*lw[t[4]];ds=nw=0;while(ds<=2&&nw==0){ds=rn(tm[5]+1);nw=[0,0,0,1,1,2,2,3][rn(tm[7]+1)]}kw=[.2,.2,.2,.2,.66,1][t[8]];if(nw>1)kw/=nw;df=b/(L*(S?1:1.5)+.5+kw);R=L>1?df/2.5*pk:df/1.5;C=[5,6,7][t[6]];e=p[t[9]*2];f=p[t[9]*2+1];u=p[t[10]*2];v=p[t[10]*2+1];bbg=t[11]>0;l_=.8;T=.3;gr=t[12]>0&&(e!=u||f!=v);bw=t[13]<1;a_=t[14]*PI/6;bc=t[15]>0;ll=t[16]+1;A=t[17]<1;Y=L>1?t[19]<1:false;smooth(8);background(bbg?0:1);if(bw){e=u=f=v=0;l_=bbg?1:0}else if(bc){if(gr){x=drawingContext;gr=x.createLinearGradient(0,d,d,0);for(k=0;k<=1;k+=.2){gr.addColorStop(k,o(.9,e+(u-e)*k,f+(v-f)*k,.25))}x.fillStyle=gr;x.fillRect(0,0,d,d);x.fillStyle=null}else{noStroke();fill(o(l_,u,v,.15));rect(0,0,d,d);noFill();v=f;u=e}}else{if(!gr){v=f;u=e}}blendMode(bbg?ADD:MULTIPLY);strokeWeight(dc);pa=[];pi=0;for(z=0;z<L;z++){n=S?L:max(C*z,1);for(y=0;y<n;y++){dx=Y?(rn(11)-5)*df*.02:0;dy=Y?(rn(11)-5)*df*.02:0;if(S){k=w;qy=y/n;qz=z/n;pa.push(w+df*(y-(n-1)/2)+dx);pa.push(w+df*(z-(n-1)/2)+dy)}else{k=df*z*(z>1?.98-t[2]*.02:1);q=y*P/n+a_+(z>1?PI/C/2:0);pa.push(w+cos(q)*k+dx);pa.push(w+sin(q)*k+dy)}}}for(pi=0;pi<pa.length;pi+=2){i=0;for(j=0;j<N;j++){rr=R*(1-(rn(11)*.2-1)*a);if(rr>b/2)rr=b/2.5;r0[j]=rr;r[j]=rr}for(c=1;c>0;c-=dc/R){i++;l2=A&&(i&1)==0?l_:bw?bbg?.7:.3:l_-.15;for(s=-1;s<2;s+=ll){stroke(o(l2,e+(u-e)*c,f+(v-f)*c,T));beginShape();for(j=0;j<=N+2;j++){q=r[j%N]*c+(sin(nw*c*P-P/4)*.5+.5)*kw*r0[j%N];b_=j*P/N+s*ds*c*P*.25+s*2*PI/3;curveVertex(cos(b_)*q+pa[pi],sin(b_)*q+pa[pi+1])}endShape()}}}}