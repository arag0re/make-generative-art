var canvasSize=500;function getHashCode(e){for(var t=0,a="string"==typeof e?e.length:0,r=0;r<a;)t=(t<<5)-t+e.charCodeAt(r++);return t<0?-1*t+4294967295:t}function renderRectangle(e,t,a,r,o,i,l){var n='<rect transform="translate(%TRANSLATE%) rotate(%ROTATION%)" width="%WIDTH%" height="%HEIGHT%" stroke="%COLOR%" fill="black"/>';return e+=n=n.replace("%TRANSLATE%",t+","+a).replace("%ROTATION%",l).replace("%WIDTH%",r).replace("%HEIGHT%",o).replace("%COLOR%",i)}function renderAerialView(e){var t=getHashCode(e)%20+5;t%2==0&&(t+=1);for(var a=t*t,r=canvasSize/t,o=r-4,i=new Array(t),l=0;l<=t;++l)i[l]=new Array(t);var n="<metadata><artwork>Aerial View</artwork><artist>daLenz</artist><style>%STYLE%</style><altitude>%ALTITUDE%</altitude><elevation>%ELEVATION%</elevation><colorset>%COLORSET%</colorset><lighttrail>%LIGHTTRAIL%</lighttrail></metadata>",c=[["#000000","Black"],["#00FF00","Neon Green"],["#FF00FF","Neon Pink"],["#F2EA02","Gold"]],s=[["#9BA1D1","#BAE2DD","#D2EACB","#F6F1C4","Sliding"],["#957DAD","#D291BC","#FEC8D8","#FFDFD3","Pastel"],["#CFD6AD","#EDE8C6","#B3C7C5","#91ADB4","Elevating"],["#A08A86","#97C6B0","#515C74","#F4ABA4","Think"],["#0B3D6F","#F25930","#FABB01","#FFEA48","Summer"],["#2E4770","#F25930","#CE5E82","#ECC6A2","Wave"],["#4FAF44","#F6EB14","#EF4423","#2A3492","Retro"],["#51404F","#E38B6A","#6C7244","#E7BC8A","Rustic"],["#CF4F38","#DDCBA1","#659F93","#DFB859","Vintage"],["#7700D7","#00BD75","#F5DA7C","#DD367C","60s"]],d=0,A=e+e,C=getHashCode(A)%100,h=getHashCode(A+A+A)%100,v=getHashCode(A+A)%100,E=getHashCode(A+A+A+A)%100,g=getHashCode(e)%s.length;n=n.replace("%COLORSET%",s[g][4]);var F='<rect width="100%" height="100%" fill="%COLOR%"/>',T=0;d+=T=C<80?0:C<85?1:C<95?2:3,F=F.replace("%COLOR%",c[T][0]),n=n.replace("%LIGHTTRAIL%",c[T][1]),n+=F;for(var D=0,p=0;p<a;p++){var H=p%t,f=Math.floor(p/t),w=H*r,u=f*r;if(!(1==i[H][f])){var L=1;if(h<7)B=1;else{L=h<50?t/4:h<85?t/2:h<95?t/4*3:t;var B=1;1==getHashCode(A)%10&&(B=Math.round(getHashCode(A+p)%L)+1);for(var O=!0;O&&B>1;)if(t<H+B||t<f+B)B--;else for(var m=0;m<=B;m++)for(var R=0;R<=B;R++)overlapped=1==i[H+m][f+R],overlapped?B--:O=!1}var I,S=getHashCode(A)%10;I=S<=7?3:S>9&&S<=17?5:7,1==v||42==v||85==v||99==v?(S=7,d=1):22==v||33==v||44==v||55==v||66==v?(S=1,d=1):S=getHashCode(A)%I;for(var k=A.slice(0,32),y=A.slice(32,64),b=0;b<S+1;b++){D++,color=getHashCode(y)%20,rotation=getHashCode(k)%20,0!=b&&E<75?rotation>5&&rotation<=10?rotation=-2:rotation>10&&rotation<=15?rotation=-4:rotation>15&&rotation<=18?rotation=-8:rotation>18&&(rotation=-16):rotation=0,10==v||11==v||12==v||13==v||14==v?(color=s[g][3],d=1):95==v||96==v||97==v||98==v||99==v?(color=s[g][1],d=1):color<=8?color=s[g][0]:color>8&&color<=13?color=s[g][1]:color>13&&color<=17?color=s[g][2]:color=s[g][3];var N=4*(b+1)/2;b>0&&B>1&&(N+=b*(B-1)*4/2);var V=o-4*b+4/B*(B-1);(V*=B)>0&&(n=renderRectangle(n,w+N,u+N,V,V,color,rotation));for(l=0;l<B;l++)for(var G=0;G<B;G++)i[H+l][f+G]=1;k=k.slice(1)+k.slice(0,1),y=y.slice(1)+y.slice(0,1)}A=A.slice(1)+A.slice(0,1)}}var z=Math.ceil(100/(7*a+a)*D);(z<20||z>80)&&d++,n=(n=(n=n.replace("%STYLE%",["roadmap","satellite","hybrid","terrain","astronomical"][d])).replace("%ELEVATION%",z)).replace("%ALTITUDE%",t);var M=document.createElement("style");M.innerText="@media (orientation: portrait) {#aerialView {width: 100vw;display: block;margin: 0 auto;}}@media (orientation: landscape) {#aerialView {height: 100vh;display: block;margin: 0 auto;}}",document.head.appendChild(M);var W=document.createElementNS("http://www.w3.org/2000/svg","svg");W.setAttribute("viewBox","0 0 "+canvasSize+" "+canvasSize),W.setAttribute("version","1.1"),W.setAttribute("style","stroke-width: 0.8; overflow:visible"),W.setAttribute("id","aerialView"),W.innerHTML=n,document.body.appendChild(W)}renderAerialView(tokenData.hash);