S=Uint32Array.from([0,1,s=t=2,3].map(e=>parseInt(tokenData.hash.substr(8*e+2,8),16))),R=(e=>(t=S[3],S[3]=S[2],S[2]=S[1],S[1]=s=S[0],t^=t<<11,S[0]^=t^t>>>8^s>>>19,S[0]/2**32));let aF=null;const pal=[0,0,0,0,0,100,249,100,50,0,0,100,0,100,50,0,0,100,59,100,50,175,100,50,59,100,50,175,100,50,59,100,50,175,100,50,175,100,50,125,100,64,300,100,64,321,100,50,24,100,22,32,100,50,201,100,50,264,100,22,272,100,50,4,79,27,29,59,18,15,75,50,4,79,27,29,59,18,15,75,50,359,100,50,325,100,37,352,100,6,5,90,62,19,90,66,170,100,99,332,96,74,330,98,43];let sld=!1;const rCan=e=>{const t={};Object.entries(document.getElementsByTagName("canvas")).forEach(e=>e[1].remove());const i=document.createElement("canvas");for(i.setAttribute("id","canv"),document.body.appendChild(i),t.c=document.getElementById("canv"),t.ctx=t.c.getContext("2d"),t.def=2400,t.size=Math.min(window.innerWidth,window.innerHeight),t.c.width=t.size*devicePixelRatio,t.c.height=t.size*devicePixelRatio,t.c.style.width=t.size+"px",t.c.style.height=t.size+"px",t.sizeMod=t.size/t.def,sld||t.ctx.scale(devicePixelRatio,devicePixelRatio),t.mkr=18*t.sizeMod*.8,s=260;s>0;s-=20)t.size<=s&&(t.mkr*=.95);return t.tileSize=t.size/e.tiles,t.step=t.tileSize/e.lines,t.stepOffset=t.step/2,t.midPoint=t.size/2-t.tileSize/2,t.cornerDistance=2*Math.pow(t.midPoint,2),t.midPoint=t.size/2,t},mF=e=>{const t={palRandoms:[]};for(let e=0;e<275;e++)t.palRandoms.push(R());const i=R(),l=R();R();t.tiles=Math.floor((i+l/2)/1.5*8+4),t.tileBoost=0,R()<.1&&(t.tileBoost+=2),R()<.1&&(t.tileBoost+=4),t.tiles+=t.tileBoost,t.lines=Math.floor(9-(i+l)/2*14)+8,t.linesBoost=0,R()<.1&&t.linesBoost--,R()<.1&&(t.linesBoost-=2),R()<.1&&t.linesBoost++,R()<.1&&(t.linesBoost+=2),t.lines+=t.linesBoost,t.tiles>=16&&t.lines--,t.tiles>17&&t.lines>5&&(t.lines=6),t.tiles+t.lines>19&&(t.lines-=4),t.lines<1&&(t.lines=1),chance=.5;R();if(t.hasSmall=0,t.hasBig=0,R()>.2&&(t.hasBig=1),t.lines%2==0&&R()>.2&&(t.hasSmall=1),t.format="Normal",(t.hasBig>0||t.hasSmall>0)&&(R()<.29&&(t.format="Outer"),R()<.21&&(t.format="Middle"),R()<.14&&(t.format="Bottom-up"),R()<.09&&(t.format="Top-down")),"Flat"===t.fill){for(;0===t.hasBig&&0===t.hasSmall;)R()>.5&&(t.hasBig=1),t.lines%2==0&&R()>.5&&(t.hasSmall=1);for(;"Normal"===t.format;)R()<.29&&(t.format="Outer"),R()<.21&&(t.format="Middle"),R()<.14&&(t.format="Bottom-up"),R()<.09&&(t.format="Top-down")}return t.tiles<8&&(t.hasBig=0,"Flat"===t.fill&&t.lines%2==0&&(t.hasSmall=1)),t.lastTick=(new Date).getTime(),t.tickSpeed=100,t.tick=0,t},drawTile=(e,t,i,a,p,n,r,d,c,h,m,f)=>{o=p/(2*n),st=p/n,pi=Math.PI,s=0,i&&!a&&(s=1),i&&a&&(s=2),!i&&a&&(s=3),s1=.5*s*pi,s2=.5*(s+1)*pi;const S={0:{0:(e,t)=>[[e,0],[0,t]],1:(e,t)=>[[0,p-e],[t,p]]},1:{0:(e,t)=>[[p,e],[p-e,0]],1:(e,t)=>[[p-e,p],[p,p-t]]}};if(null===h)for(r.fillStyle="#FFFFFF",r.strokeStyle="#000000",r.lineCap="round",l=n-1;l>=0;l--){r.lineWidth=4*c;const s=l*st+o,n=(l-1)*st+o,h=S[i][a](s,n)[0],m=S[i][a](s,n)[1];r.lineCap="round",l>0&&(r.beginPath(),r.moveTo(e+h[0],t+h[1]),r.arc(e+p*i,t+p*a,s,s1,s2),r.lineTo(e+m[0],t+m[1]),r.arc(e+p*i,t+p*a,n,s2,s1,!0),r.closePath(),r.fill()),r.lineCap="round",r.lineWidth=d,r.beginPath(),r.arc(e+p*i,t+p*a,s,s1,s2),r.stroke()}else{r.lineCap="square";let l=`hsla(${pal[3*m]}, ${pal[3*m+1]}%, ${pal[3*m+2]}%, ${h})`;1!==s&&2!==s||(l=`hsla(${pal[3*f]}, ${pal[3*f+1]}%, ${pal[3*f+2]}%, ${h})`);let o=`hsla(${pal[3*m]}, ${pal[3*m+1]}%, ${pal[3*m+2]}%, ${h/2})`;1!==s&&2!==s||(o=`hsla(${pal[3*f]}, ${pal[3*f+1]}%, ${pal[3*f+2]}%, ${h/2})`),r.fillStyle=l,r.strokeStyle=l,r.lineWidth=d/4;const c=(n*st+0)*h,g=0,z=S[i][a](c,g)[0],T=S[i][a](c,g)[1];r.beginPath(),r.moveTo(e+z[0],t+z[1]),r.arc(e+p*i,t+p*a,c,s1,s2),r.lineTo(e+T[0],t+T[1]),r.arc(e+p*i,t+p*a,g,s2,s1,!0),r.closePath(),h>=.95&&r.stroke(),r.fill()}},drawStraight=(e,t,i,s,o,a,p,n,r,d,c)=>{const h=s/(2*o),m=s/o;if(a.lineCap="round",a.fillStyle="#FFFFFF",a.strokeStyle="#000000",null===r)for(l=o-1;l>=0;l--){a.lineWidth=4*n;l;let o=p2x=l*m+h,r=p2xp=(l-1)*m+h,d=p1yp=0,c=p2yp=s;i&&([o,d,p2x,c]=[d,o,c,p2x]),i&&([r,p1yp,p2xp,p2yp]=[p1yp,r,p2yp,p2xp]),l>0&&(a.beginPath(),a.moveTo(e+o,t+d),a.lineTo(e+p2x,t+c),a.lineTo(e+p2xp,t+p2yp),a.lineTo(e+r,t+p1yp),a.closePath(),a.fill()),a.lineWidth=p,a.beginPath(),a.moveTo(e+o,t+d),a.lineTo(e+p2x,t+c),a.stroke()}else{a.lineCap="square";let l=`hsla(${pal[3*d]}, ${pal[3*d+1]}%, ${pal[3*d+2]}%, ${r})`;i&&(l=`hsla(${pal[3*c]}, ${pal[3*c+1]}%, ${pal[3*c+2]}%, ${r})`);let o=`hsla(${pal[3*d]}, ${pal[3*d+1]}%, ${pal[3*d+2]}%, ${r/2})`;i&&(o=`hsla(${pal[3*c]}, ${pal[3*c+1]}%, ${pal[3*c+2]}%, ${r/2})`),a.fillStyle=l,a.strokeStyle=l,a.lineWidth=p/4,a.beginPath(),a.moveTo(e,t),i?(a.lineTo(e+s*r,t),a.lineTo(e+s*r,t+s),a.lineTo(e,t+s)):(a.lineTo(e+s,t),a.lineTo(e+s,t+s*r),a.lineTo(e,t+s*r)),a.closePath,r>=.95&&a.stroke(),a.fill()}},getPos=(e,t,i)=>({left:i.tileSize*e,right:i.tileSize*(e+1),top:i.tileSize*t,bottom:i.tileSize*(t+1)}),maketH=(e,t)=>{const l={};for(let s=0;s<t.tiles;s++)for(let o=0;o<t.tiles;o++){pos=getPos(o,s,e),d=R(),i=`${o}:${s}`,i2=`${o+1}:${s}`,i3=`${o}:${s+1}`,i4=`${o+1}:${s+1}`,scM=1,scM2=1;const a=.25;if(!l[i]||l[i]&&"skip"in l[i][0]&&!0!==l[i][0].skip){let e=.7-R(),p=(.7-R())*a*t.hasBig,n=(.7-R())*scM2*((t.lines+1)%2);"Top-down"===t.format&&(n=1-(p=(t.tiles-s)/t.tiles*t.hasBig)),"Bottom-up"===t.format&&(n=1-(p=s/t.tiles*t.hasBig)),"Middle"===t.format&&(n=(t.tiles-1-s)/(t.tiles-1)*2-1,s>=t.tiles/2&&(n=s/(t.tiles-1)*2-1),p=1-((t.tiles-1-s)/(t.tiles-1)*2-1),s>=t.tiles/2&&(p=1-(s/(t.tiles-1)*2-1))),"Outer"===t.format&&(p=(t.tiles-1-s)/(t.tiles-1)*2-1,s>=t.tiles/2&&(p=s/(t.tiles-1)*2-1),n=1-((t.tiles-1-s)/(t.tiles-1)*2-1),s>=t.tiles/2&&(n=1-(s/(t.tiles-1)*2-1))),p<.1&&(p=.1),p>.9&&(p=.9),n<.1&&(n=.1),n>.9&&(n=.9),e<.1&&(e=.1),e>.9&&(e=.9),p*=t.hasBig,n*=t.hasSmall;let r=!1,d=!1,c=[0,0];R()<n&&t.lines>1&&(d=!0),!(o<t.tiles-1&&s<t.tiles-1&&R()<p)||l[i2]&&l[i2][0].skip||l[i3]&&l[i3][0].skip||l[i4]&&l[i4][0].skip||d||(r=!0);let h={gB:r,gS:d,sizeMod:1,sO:c};d&&(h.sizeMod=.5),r&&(h.sizeMod=2);let m=[],f=d?4:1;for(ii=0;ii<f;ii++){const t=JSON.parse(JSON.stringify(h));if(R()>=e){t.type=2;const e=R();e<.75&&(t.type=3),e<.5&&(t.type=4),e<.25&&(t.type=5)}else t.type=-1,R()<.5&&(t.type=1);1===ii&&(t.sO=[.5,0]),2===ii&&(t.sO=[0,.5]),3===ii&&(t.sO=[.5,.5]),m.push(t)}l[i]=m,m[0].gB&&(l[`${o+1}:${s}`]=l[`${o}:${s+1}`]=l[`${o+1}:${s+1}`]=[{skip:!0}])}}return l},drawImage=(e,t,i,l,s,o)=>{const a=(new Date).getTime();for(let p=0;p<t.tiles;p++)for(let n=0;n<t.tiles;n++){const r=i[`${n}:${p}`];r[0].skip||r.forEach(i=>{i.nextAction&&a>i.nextAction&&(i.type<2&&(i.type*=-1),i.type>1&&i.type++,i.type>5&&(i.type=2),i.nextAction+=i.nextCycle);getPos(n,p,e);if(i.type>1){let a=0,r=0;3!==i.type&&4!==i.type||(a=1),4!==i.type&&5!==i.type||(r=1),drawTile(e.tileSize*n+i.sO[0]*e.tileSize,e.tileSize*p+i.sO[1]*e.tileSize,a,r,e.tileSize*i.sizeMod,t.lines*i.sizeMod,e.ctx,e.mkr,e.sizeMod,l,s,o),drawTile(e.tileSize*n+i.sO[0]*e.tileSize,e.tileSize*p+i.sO[1]*e.tileSize,+!a,+!r,e.tileSize*i.sizeMod,t.lines*i.sizeMod,e.ctx,e.mkr,e.sizeMod,l,s,o)}i.type<2&&(null===l&&drawStraight(e.tileSize*n+i.sO[0]*e.tileSize,e.tileSize*p+i.sO[1]*e.tileSize,1===i.type,e.tileSize*i.sizeMod,t.lines*i.sizeMod,e.ctx,e.mkr,e.sizeMod,l,s,o),drawStraight(e.tileSize*n+i.sO[0]*e.tileSize,e.tileSize*p+i.sO[1]*e.tileSize,1!==i.type,e.tileSize*i.sizeMod,t.lines*i.sizeMod,e.ctx,e.mkr,e.sizeMod,l,s,o))})}},dTT=(e,t)=>{const i=gT,l=1e3*dur;let s=((new Date).getTime()-e.sT)/l;if(s>1&&!1===paused){for(e.sT=(new Date).getTime(),oldpp1=pp1,oldpp2=pp2,pp1+=13,pp2+=17,pl=(pal.length-1)/3,pp1>pl&&(pp1-=Math.floor(pl)),pp2>pl&&(pp2-=Math.floor(pl));pp2===pp1;)(pp2+=1)>pl&&(pp2-=Math.floor(pl));oldTh=JSON.parse(JSON.stringify(tH)),tH=maketH(i,e),0!==tick&&tick!==bounce-1||(tH=orgTh),t=tH,firstDraw=!1,paused=!0,tick++}const o=1e3*pau;let a=((new Date).getTime()-e.sT)/o;paused&&a>1&&(paused=!1,e.sT=(new Date).getTime(),s=0,reversed&&(reversed=!1,firstDraw=!0),tick>bounce&&(tick=0,reversed=!0,pp1=oldpp1,pp2=oldpp2)),i.ctx.globalCompositeOperation="source-over",i.ctx.fillStyle="#FFFFFF",i.ctx.beginPath(),i.ctx.rect(0,0,i.size,i.size),i.ctx.fill(),i.ctx.lineWidth=i.mkr,firstDraw||reversed||0===tick?drawImage(i,e,orgTh,null):drawImage(i,e,oldTh,1,oldpp1,oldpp2),paused||(reversed?drawImage(i,e,orgTh,1-s,pp1,pp2):drawImage(i,e,t,s,pp1,pp2)),window.cancelAnimationFrame(aF),aF=window.requestAnimationFrame(()=>{dTT(e,t)})};let[ff,gT,tH,freeze,oldTh,orgTh]=new Array(6).fill(null),[firstDraw,paused,reversed]=[!0,!0,!1],[dur,pau,bounce,tick,pr]=[60,60,6,0,Math.floor(R()*(pal.length-1)/3)],[pp1,pp2]=[pr,pr];for(;pp2===pp1;)pp2=Math.floor(R()*(pal.length-1)/3);let[oldpp1,oldpp2]=[pp1,pp1];counter=0,window.addEventListener("DOMContentLoaded",function(){(ff=mF(tokenData.hash)).sT=(new Date).getTime(),gT=rCan(ff),tH=maketH(gT,ff),orgTh=JSON.parse(JSON.stringify(tH)),window.cancelAnimationFrame(aF),aF=window.requestAnimationFrame(()=>{dTT(ff,tH,!1)}),window.onresize=(()=>{gT=rCan(ff),window.cancelAnimationFrame(aF),aF=window.requestAnimationFrame(()=>{dTT(ff,tH,!1)})})}),window.addEventListener("dblclick",()=>{[dur,pau]=60===dur?[5,2]:[60,60]});