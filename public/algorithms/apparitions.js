// CC BY-NC 4.0  https://github.com/aaronpenne/
let rv=hti(tokenData.hash),sd=gs(tokenData.hash),dim=Math.min(window.innerWidth,window.innerHeight);var v;let cw="#F6F6F5",cb="#171718";function setup(){dim=Math.min(window.innerWidth,window.innerHeight),createCanvas(dim,dim,P2D),colorMode(RGB,100,100,100,100),rectMode(CORNERS),ellipseMode(CORNERS),strokeCap(SQUARE),ew=["#222","#336","#358","#333","#365","#45A","#4C3F5D","#4E6E61","#544","#576","#5493B6","#6E4E37","#7AC","#78876E","#89292D","#87A","#8F3935","#A33","#B8513B","#B78","#B73","#CCC","#C54","#C95","#D57C30","#D94","#DA9","#C99","#DEC254","#E8E2D6","#F2F3EE"]}function draw(){sd=gs(tokenData.hash),noiseSeed(sd),randomSeed(sd),v={sd:sd,xp:.18,yp:.18,xd:mv(2,100,300),yd:mv(3,600,700),xo:mv(4,.002,.005),yo:mv(5,.005,.03),xa:mv(6,.1*width,.3*width),ya:mv(7,.1*height,.3*width),bd:int(mv(8,10,200)),sw:!0,dk:!1,tk:.01*height,bk:mv(9)<.5?"r":"e",sd:mv(10)<.3,bks:mv(11)<.5,bkc:mv(12)<.8?cb:cw,xdn:mv(13)<.5?-1:1,xf:mv(14)<.1?1:0,cs:mv(18)<.15},mv(16)<.6?(v.sxn=!1,v.syn=!1):mv(16)<.7?(v.sxn=!0,v.syn=!0):mv(16)<.8?(v.sxn=!1,v.syn=!0):mv(16)<=1&&(v.sxn=!0,v.syn=!1),v.xa*=v.xdn,1===v.xf&&(v.xa=0),mv(0)<.15?(v.xp=-.14,v.xd*=1.5,v.yo*=2):mv(0)<.3&&(v.yp=-.14,v.yd*=1.5,v.xo*=2),mv(1)<.005?(v.p=[cw],v.sw=!0,v.cs=!1):mv(1)<.01?(v.p=[cb],v.sw=!0,v.cs=!1,v.dk=!0):mv(1)<.02?(v.p=["#823d65",cw,cb],v.cs=!1,v.sd=!1,colorMode(HSB,360,100,100)):mv(1)<.1?(v.p=[cw,cb],v.sw=!0,v.cs=!1):mv(1)<.3?v.p=[rc(ew),cb,cw]:mv(1)<.48?v.p=[rc(ew),rc(ew),rc(ew),cb,cw]:mv(1)<.52?v.p=["#8F3935",cw,"#D94"]:mv(1)<.57?v.p=["#BA7182","#C99","#DA9","#D94",cw]:mv(1)<.61?v.p=["#89292D","#8F3935","#A33",cw]:mv(1)<.62?v.p=["#253122","#f9c1ce","#fdd4bd","#78cdd0",cw]:mv(1)<.64?v.p=["#bce4e5","#cab356","#f15a30","#00b49b"]:mv(1)<.66?v.p=["#9bc","#cc9","#cee","#099","#78cdd0",cw]:mv(1)<.69?v.p=["#6d4145","#ca92a8","#713b4c","#f9c1ce",cw,cb]:mv(1)<.7?v.p=["#064f6e","#ae5224","#ebd3a2","#635a3a",cw]:mv(1)<.72?v.p=["#4f4086","#1e0e3f","#9a72aa","#c53c69",cw]:mv(1)<.75?v.p=["#f5ecc2","#eeb480","#837e31","#253122",cw]:mv(1)<.77?v.p=["#064f6e","#f68c50","#40456a","#f3a257",cw,cb]:mv(1)<.79?v.p=["#a36aa5","#ebd3a2","#8fa071","#e31f26",cw]:mv(1)<.8?v.p=["#34454c","#d8a37b","#71502f","#f5ecc2",cw]:mv(1)<.81?v.p=["#547076","#c5a56e","#f5ecc2","#dd4027",cw,cb]:mv(1)<.82?v.p=["#a36aa5","#fcb315","#006eb8","#e31f26",cw]:mv(1)<.86?v.p=["#34454c","#ae5224","#eeb480","#b5decc",cw]:mv(1)<.87?v.p=["#006eb8","#00978d","#fdbf68","#f99d1b",cw,cb]:mv(1)<.88?v.p=["#97acc8","#b5decc","#ffefae","#f37420",cw]:mv(1)<.9?v.p=["#7d133a","#a36752","#b6bfc1","#f9c1ce",cw,cb]:mv(1)<.92?v.p=["#7a4456","#c2ae93","#c27544","#762c19",cw,cb]:mv(1)<.94?v.p=["#12354e","#c2ae93","#bb7125","#eea78c",cw]:mv(1)<.95?v.p=["#D0DBD7","#739C8E","#CEB0CA","#ca92a8","#713b4c",cw,cb]:v.p=ew.concat([cw,cw,cw,cw]),strokeWeight(v.tk),bc=v.bkc===cw?cb:cw,v.cs&&(v.bkc=v.p[0]),background(bc),da(),noLoop()}function gg(e=10,v=10,c=.2,t=.2){var a;gd=[],e=round(e),v=round(v);for(var n=width*c,d=width*(1-c),i=height*t,o=height*(1-t),r=0;r<=v;r++){for(row=[],a=0;a<=e;a++)j_=n+(d-n)*a/e,i_=i+(o-i)*r/v,row.push([j_,i_]);gd.push(row)}return gd}function windowResized(){dim=Math.min(window.innerWidth,window.innerHeight),resizeCanvas(dim,dim)}function get_timestamp(){return(new Date).toISOString().replace(/[^T0-9]/g,"").replace("T","_")}function dal(e,c,t=0){for(beginShape(),j=0;j<e[c].length;j++)x=e[c][j][0],y=e[c][j][1],x_=v.sxn?x+v.xdn*t-map(noise(c*v.xo),0,1,-v.xa,v.xa):x+v.xdn*t-map(noise(c*v.xo,j*v.yo),0,1,-v.xa,v.xa),y_=v.syn?y-t/2+map(noise(j*v.yo),0,1,-v.ya,v.ya):y-t/2+map(noise(c*v.xo,j*v.yo),0,1,-v.ya,v.ya),curveVertex(x_,y_);endShape()}function da(){push(),v.bks?(strokeWeight(.5*v.tk),stroke(v.bkc),noFill()):(noStroke(),fill(v.bkc));var e=.1*dim;for("r"===v.bk?rect(e,e,width-e,height-e):"e"===v.bk&&ellipse(e,e,width-e,height-e),pop(),v.sd&&(v.yd*=.5),strokeWeight(v.tk),gd=gg(v.xd,v.yd,v.xp,v.yp),tic=color(rc(v.p)),tac=color(rc(v.p)),i=0;i<gd.length&&(v.sw&&(push(),noFill(),stroke("#1111"),v.dk&&stroke("#EEE1"),dal(gd,i,.004*height),pop()),i%v.bd==0&&(tic=color(rc(v.p)),tac=color(rc(v.p))),push(),noFill(),v.sd?stroke(rc(v.p)):stroke(lerpColor(tic,tac,i%v.bd/v.bd)),dal(gd,i),pop(),i!==gd.length-2);i++);}function hti(e){let v=[];for(let e=0;e<32;e++)v.push(tokenData.hash.slice(2+2*e,4+2*e));return v.map(e=>parseInt(e,16))}function gs(e){return parseInt(tokenData.hash.slice(0,16),16)}function mv(e,v=0,c=1){return map(rv[e],0,255,v,c)}function rand_dec(){return sd^=sd<<13,sd^=sd>>17,sd^=sd<<5,(sd<0?1+~sd:sd)%1e3/1e3}function rand_between(e,v){return e+(v-e)*rand_dec()}function rc(e){return e[Math.floor(rand_between(0,.99*e.length))]}
