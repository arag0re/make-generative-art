function generateSeedFromTokenData(e){return parseInt(e.hash.slice(0,16),16)}let seed=generateSeedFromTokenData(tokenData),DEFAULT_SIZE=1e3,WIDTH=window.innerWidth,HEIGHT=window.innerHeight,DIM=.99*Math.min(WIDTH,HEIGHT),M=DIM/DEFAULT_SIZE;const makeHex=(e,o,t,r)=>{const i=[];for(let h=0;h<6;h+=1)i.push({x:e+t*cos(r),y:o+t*sin(r)}),r+=60;return{dots:i,center:{x:e,y:o}}};let randomGrid,backs,things,images,grid;const panelWidth=95*M,panelHeight=110*M,pDim=Math.min(panelWidth,panelHeight);let color1,color2,color3,play=!0;function mouseClicked(){play?(noLoop(),play=!1):(loop(),play=!0)}function keyPressed(){83===keyCode&&saveCanvas(tokenData.hash,"png"),keyCode>48&&keyCode<59&&pixelDensity(keyCode-48)}function setup(){createCanvas(DIM,DIM),angleMode(DEGREES);let e=displayDensity();pixelDensity(e);const o=sS(shA(palettes)[0],3).map((e=>color(e)));color1=o[0],color2=o[1],color3=o[2];const t=[pick([1,2,3]),pick([3,4]),pick([2,3,4]),pick([3,4]),pick([2,3])],r=250*M,i=170*M,h=190*M,s=165*M,c=110*M,n=(()=>{const e=[];for(let o=0;o<5;o+=1){const t=[];for(let e=0;e<4;e+=1)o%2==0?t.push(makeHex(r+e*h,i+o*s,c,30)):t.push(makeHex(r-h/2+e*h,i+o*s,c,30));e.push(t)}return e})();randomGrid=n.map(((e,o)=>sS(e,t[o]))),grid=randomGrid.flat();const l=3*grid.length;backs=array(l).map((()=>createGraphics(panelWidth,panelHeight))),backs.forEach((o=>{o.angleMode(DEGREES),o.pixelDensity(e)}));const p=[],d=[],a=[],g=pick([2,3]);dR4(0,0,panelWidth,panelHeight,3,p,.7,rnd),dR4(0,0,panelWidth,panelHeight,3,d,.7,rnd),dR4(0,0,panelWidth,panelHeight,g,a,.9,rnd);const f=[{thing:thing0,params:{offset:rG(.1,.4),rects:p,colors:shA([color1,color2,color3]),i:pick([0,1,2,3]),speed:rG(10,35)}},{thing:thing0,params:{offset:rG(.1,.4),rects:d,colors:shA([color1,color2,color3]),i:pick([0,1,2,3]),speed:rG(10,35)}},{thing:thing1,params:{colors:shA([color1,color2,color3]),lineCount:rF(8,20),speed:rG(5,20),speed2:rG(10,40),invert:rnd()>.5,flick:rnd()>.5}},{thing:thing1,params:{colors:shA([color1,color2,color3]),lineCount:rF(8,20),speed:rG(5,20),speed2:rG(10,40),invert:rnd()>.5,flick:rnd()>.5}},{thing:thing2,params:{colors:shA([color1,color2,color3]),speed:rG(4,18)}},{thing:thing2,params:{colors:shA([color1,color2,color3]),speed:rG(4,18)}},{thing:thing3,params:{colors:shA([color1,color2,color3]),type:rnd()>.5,rects:a,speed1:rG(5,15),speed2:rG(5,15)}},{thing:thing3,params:{colors:shA([color1,color2,color3]),type:rnd()>.5,rects:a,speed1:rG(5,15),speed2:rG(5,15)}},{thing:thing4,params:{colors:shA([color1,color2,color3]),wave:rnd()>.5,double:rnd()>.5,speed:rG(10,30)}},{thing:thing4,params:{colors:shA([color1,color2,color3]),wave:rnd()>.5,double:rnd()>.5,speed:rG(10,30)}},{thing:thing5,params:{colors:shA([color1,color2,color3]),speed:rG(1,3),pointCount:pick([3,4,5,6])}},{thing:thing5,params:{colors:shA([color1,color2,color3]),speed:rG(1,3),pointCount:pick([3,4,5,6])}},{thing:thing6,params:{colors:shA([color1,color2,color3]),speed:rG(.1,.4)}},{thing:thing6,params:{colors:shA([color1,color2,color3]),speed:rG(.1,.4)}},{thing:thing7,params:{colors:shA([color1,color2,color3]),speed:rG(.02,.06),ms:rG(10,20),u1:pick([1,-1]),u2:pick([1,-1])}},{thing:thing7,params:{colors:shA([color1,color2,color3]),speed:rG(.02,.06),ms:rG(10,20),u1:pick([1,-1]),u2:pick([1,-1])}},{thing:thing8,params:{colors:shA([color1,color2,color3]),type:rnd()>.7,speed1:rG(2,10),speed2:rG(5,20)}},{thing:thing8,params:{colors:shA([color1,color2,color3]),speed1:rG(2,10),speed2:rG(5,20)}},{thing:thing9,params:{colors:shA([color1,color2,color3]),cap:rnd()>.5,type:rnd()>.5,speed:rG(3,10),invertSize:rnd()>.5,dist:rG(-.5,.5)}},{thing:thing9,params:{colors:shA([color1,color2,color3]),cap:rnd()>.5,type:rnd()>.5,speed:rG(3,10),invertSize:rnd()>.5,dist:rG(-.5,.5)}},{thing:thing10,params:{colors:shA([color1,color2,color3]),type:rnd()>.5,type2:rnd()>.5,speed:rG(10,30)}},{thing:thing10,params:{colors:shA([color1,color2,color3]),type:rnd()>.5,type2:rnd()>.5,speed:rG(10,30)}},{thing:thing11},{thing:thing12,params:{colors:shA([color1,color2,color3]),type:!1}},{thing:thing15,params:{colors:shA([color1,color2,color3]),speed1:rG(10,40),speed2:rG(10,40),p1:pick([-1,1]),p2:pick([-1,1]),count:rF(6,12)}},{thing:thing15,params:{colors:shA([color1,color2,color3]),speed1:rG(10,40),speed2:rG(10,40),p1:pick([-1,1]),p2:pick([-1,1]),count:rF(6,12)}},{thing:thing16,params:{colors:shA([color1,color2,color3]),speed:rG(10,30),angle:rF(0,3)}},{thing:thing16,params:{colors:shA([color1,color2,color3]),speed:rG(10,30),angle:rF(0,3)}},{thing:thing17,params:{colors:shA([color1,color2,color3]),type:rnd()>.5,speed:rG(10,40)}}],m={thing:thing14,params:{letter:pick("ARTBLOCKS".split("")),colors:shA([color1,color2,color3])}};things=array(l-1).map((()=>pick(f))),things.push(m),things=shA(things);let k=0;images=array(l/3).map((()=>{const e=[backs[k],backs[k+1],backs[k+2]];return k+=3,e}))}function draw(){color2.setAlpha(100),background(color2),color2.setAlpha(255);let e=frameCount/60*8;backs.forEach(((o,t)=>{things[t].thing(o,e,things[t].params)})),grid.forEach((({center:e},o)=>{const[t,r,i]=images[o];stroke(color2),strokeWeight(2*M),push(),translate(e.x,e.y),shearY(30),rect(0,-panelHeight,panelWidth,panelHeight),drawingContext.clip(),image(t,0,-panelHeight),pop(),push(),translate(e.x,e.y),shearY(-30),rect(-panelWidth,-panelHeight,panelWidth,panelHeight),drawingContext.clip(),image(r,-panelWidth,-panelHeight),pop(),push(),translate(e.x,e.y),shearY(30),shearX(-41),rect(0,0,panelWidth,panelHeight),drawingContext.clip(),image(i,0,0),pop()})),strokeWeight(M),stroke(color1),line(.8*width,.97*height,.97*width,.97*height),line(.97*width,.97*height,.97*width,.8*height),line(.75*width,.98*height,.98*width,.98*height),line(.98*width,.98*height,.98*width,.75*height),line(.02*width,.02*height,.2*width,.02*height),line(.02*width,.02*height,.02*width,.25*height);for(let e=0;e<400;e++){let e=rG(0,width),o=rG(0,height),t=3*noise(.02*e*M,.02*o*M,frameCount)*M+.1*M;fill(color1),noStroke(),ellipse(e,o,t,t)}}const thing0=(e,o,t)=>{const{rects:r,offset:i,colors:h,i:s,speed:c}=t,[n,l,p]=h;e.background(n),r.forEach((({x:t,y:r,w:h,h:d})=>{const a=h*i,g=d*i,f=[[t,r,t+h,r],[t+h,r,t+h,r+d],[t+h,r+d,t,r+d],[t,r+d,t,r]],m=map(cos(o*c),-1,1,0,1);e.push(),e.fill(l),e.strokeWeight(M),e.stroke(lerpColor(n,p,m)),e.line(...f[s]),e.noStroke(),e.rect(t+a,r+g,h-2*a,d-2*g),e.pop()}))},thing1=(e,o,t)=>{const{colors:r,lineCount:i,speed:h,speed2:s,invert:c,flick:n}=t;e.background(r[0]);const l=c?e.width:e.height;for(let t=0;t<l;t+=l/i)e.stroke(r[1]),e.strokeWeight(n?M*map(cos((o+t)*s),-1,1,.1,1.2):M),c?e.line(t,0,t,map(e.cos((o+t)*h),-1,1,0,e.height)):e.line(0,t,e.map(e.cos((o+t)*h),-1,1,0,e.width),t)},thing2=(e,o,t)=>{const{colors:r,speed:i}=t,[h,s]=r,c={x:e.width/2,y:e.height/2};e.background(h),e.stroke(s),e.strokeWeight(pDim/16+sin(o*i)*(pDim/16)),e.fill(h),e.circle(c.x,c.y,pDim/2+cos(2*o*i)*pDim/4)},thing3=(e,o,t)=>{const{colors:r,rects:i,speed1:h,speed2:s,type:c}=t,[n,l]=r;e.background(n),i.forEach((({x:t,y:r,w:i,h:p})=>{const d=min(i,p),a=map(sin(Math.hypot(t+o*h,r+o*s)),-1,1,0,1),g=lerpColor(n,l,a);e.fill(g),e.rectMode(CENTER),e.noStroke(),c?e.circle(t+i/2,r+p/2,.7*d):e.square(t+i/2,r+p/2,.7*d)}))},thing4=(e,o,t)=>{const{colors:r,speed:i,wave:h,double:s}=t,[c,n]=r,l=mDL(e.width,0,0,0,12),p=mDL(0,e.height,e.width,e.height,12);e.background(color2);for(let t=0;t<l.length-1;t+=1){const{x:r,y:h}=l[t],{x:s,y:d}=l[(t+1)%l.length],{x:a,y:g}=p[(t+1)%p.length],{x:f,y:m}=p[t],k=map(cos((o+4*t)*i/2),-1,1,0,1),y=lerpColor(c,n,k);e.fill(y),e.noStroke(),e.beginShape(),vertex(r,h),vertex(s,d),vertex(a,g),vertex(f,m),e.endShape(e.CLOSE)}const d=h?map(cos(o*i/4),-1,1,.4,.6):.5,a=map(cos(o*i),-1,1,.25*e.width,.75*e.width),g=map(cos(o*i),-1,1,e.height*d,e.height*(1-d)),f=map(cos(o*i),1,-1,.25*e.width,.75*e.width),m=map(cos(o*i),1,-1,e.height*(1-d),e.height*d),k=map(sin(o*i),-1,1,0,30*M),y=map(sin(o*i),1,-1,0,30*M);e.fill(n),e.stroke(c),e.strokeWeight(M),e.circle(a,g,k),s&&(e.stroke(n),e.fill(c),e.circle(f,m,y))},thing5=(e,o,t)=>{const{colors:r,speed:i,pointCount:h}=t,[s,c]=r,n={x:e.width/2,y:e.height/2};e.angleMode(DEGREES),e.background(s);const l=mDP(n.x,n.y,h,h,pDim/3,30+o*i);for(let o=0;o<l.length;o+=1){const{x:t,y:r}=l[o];e.fill(c),e.circle(t,r,pDim/4)}for(let t=0;t<l.length;t+=1){const{x:r,y:h}=l[t],{x:n,y:p}=l[(t+1)%l.length],d=e.lerp(r,n,e.abs(e.cos(3*o*i))),a=e.lerp(h,p,e.abs(e.cos(3*o*i)));e.strokeWeight(M),e.stroke(c),e.fill(s),e.line(r,h,d,a),e.circle(d,a,pDim/8)}},thing6=(e,o,t)=>{const{speed:r,colors:i}=t,[h,s]=i;let c;e.background(h),e.fill(s),e.beginShape(),e.strokeWeight(M);let n=0;for(let t=0;t<=e.width;t+=2)c=e.map(e.noise(n,o*r),0,1,pDim,pDim/4),e.vertex(t,c),n+=.5,t%8==0&&(push(),e.stroke(s),e.fill(h),e.circle(t,c,pDim/20),pop());e.vertex(e.width,e.height),e.vertex(0,e.height),e.endShape(e.CLOSE)},thing7=(e,o,t)=>{const{colors:r,speed:i,u1:h,u2:s}=t,[c,n,l]=r,p=e.width/2,d=e.height/2;e.background(c);const a=map(o*i%2,0,1,-p*h,p*h),g=map(o*i%2,0,1,-d*s,d*s);e.stroke(n),e.fill(l),e.strokeWeight(pDim/32),e.line(p+a,0,p+a,e.height),e.line(0,d+g,e.width,d+g),e.circle(p+a,d+g,pDim/8)},thing8=(e,o,t)=>{const{colors:r,speed1:i,speed2:h,type:s}=t,[c,n]=r,l={x:e.width/2,y:e.height/2};e.background(c);for(let t=0;t<10;t+=1){const r=map(cos((o+t*i)*h),-1,1,0,1);e.strokeWeight(M),e.fill(lerpColor(c,n,r)),e.stroke(n),e.rectMode(CENTER),s?e.rect(l.x,l.y,e.width-t*(e.width/10),e.height-t*(e.height/10)):e.ellipse(l.x,l.y,1.5*e.width-t*(e.width/7),1.5*e.height-t*(e.height/7))}},thing9=(e,o,t)=>{const{colors:r,speed:i,invertSize:h,cap:s,type:c,dist:n}=t,[l,p]=r;l.setAlpha(100),e.background(l),e.stroke(p),e.strokeCap(s?SQUARE:ROUND),e.strokeWeight(pDim/4);const d=e.map(abs(cos(o*i)),0,1,-e.height,e.height+e.height*n),a=e.map(abs(cos(o*i)),0,1,-e.height,e.height),g=e.map(abs(cos(o*i)),0,1,e.height+e.height*n,0),f=e.map(abs(cos(o*i)),0,1,e.height,-e.height),m=h?d:g,k=h?a:f;e.line(e.width/2,m,e.width/2,e.height+k),e.noStroke(),e.fill(p),c?(e.circle(.25*e.width-pDim/20,e.height/2,e.map(e.cos(2*o*i),-1,1,0,pDim/4)),e.circle(.75*e.width+pDim/20,e.height/2,e.map(e.cos(2*o*i),-1,1,0,pDim/4))):(e.rectMode(CENTER),e.square(.25*e.width-pDim/20,e.height/2,e.map(e.cos(2*o*i),-1,1,0,pDim/4)),e.square(.75*e.width+pDim/20,e.height/2,e.map(e.cos(2*o*i),-1,1,0,pDim/4))),l.setAlpha(255)},thing10=(e,o,t)=>{const{colors:r,speed:i,type:h,type2:s}=t,[c,n]=r,l={x:e.width/2,y:e.height/2};e.background(c);const p=pDim/20,d=pDim/5;e.noFill(),e.stroke(n),e.strokeWeight(map(cos(o*i),-1,1,p,d)),s?e.rect(0,0,e.width,e.height):e.circle(l.x,l.y,e.width,e.height),e.line(0,0,e.width,e.height),e.line(e.width,0,0,e.height),e.stroke(c),e.strokeWeight(map(cos(o*i),-1,1,d,p)),e.push(),e.rectMode(CENTER),h?e.circle(l.x,l.y,pDim/2):e.square(l.x,l.y,pDim/2),e.pop()},thing11=e=>{e.background(color2)},thing12=(e,o,t)=>{const{colors:r,type:i}=t,[h,s]=r,c=i?e.width:e.height;e.background(h);for(let o=-1;o<=c;o+=c/12)e.strokeWeight(M),e.stroke(s),i?e.line(o,0,o,e.height):e.line(0,o,e.width,o)},thing14=(e,o,t)=>{const{colors:r,letter:i}=t,[h,s,c]=r,n=e.width/2,l=e.height/2,p=map(cos(20*o),-1,1,-pDim/100,pDim/25);e.background(h),noStroke(),e.textSize(pDim/1.5),e.fill(s),e.text(i,n-pDim/5-p,l+pDim/5+p),e.strokeWeight(M),e.stroke(h),e.fill(c),e.text(i,n-pDim/4+p,l+pDim/4-p)},thing15=(e,o,t)=>{const{colors:r,speed1:i,speed2:h,p1:s,p2:c,count:n}=t,[l,p,d]=r;e.background(l);const a=.1*e.width,g=.8*e.width/n;for(let t=a;t<e.width-a;t+=g){const r=map(cos((o+(e.width/2+t))*i*s),-1,1,.2*e.height,.8*e.height),n=map(sin((o+(e.width/2+t))*h*c),-1,1,.2*e.height,.8*e.height);e.push(),e.rectMode(CENTER),e.noStroke(),e.fill(p),e.rect(t+g/2,e.height/2,g,r),e.fill(d),e.rect(t+g/4,e.height/2,g/2,n),e.pop()}},thing16=(e,o,t)=>{const{colors:r,speed:i,angle:h}=t,[s,c,n]=r;e.background(s);const l={x:e.width/2,y:e.height/2},p=makeHex(l.x,l.y,pDim/3,60*h),d=map(cos(o*i),-1,1,0,1),a=map(sin(o*i*.75),-1,1,0,1),g=map(cos(o*i/2),-1,1,0,1);e.push(),e.strokeWeight(M),e.stroke(c),e.fill(lerpColor(s,n,d)),e.beginShape(),vertex(p.dots[0].x,p.dots[0].y),vertex(p.dots[1].x,p.dots[1].y),vertex(p.dots[2].x,p.dots[2].y),vertex(l.x,l.y),e.endShape(e.CLOSE),e.fill(lerpColor(s,n,a)),e.beginShape(),vertex(p.dots[2].x,p.dots[2].y),vertex(p.dots[3].x,p.dots[3].y),vertex(p.dots[4].x,p.dots[4].y),vertex(l.x,l.y),e.endShape(e.CLOSE),e.fill(lerpColor(s,n,g)),e.beginShape(),vertex(p.dots[4].x,p.dots[4].y),vertex(p.dots[5].x,p.dots[5].y),vertex(p.dots[0].x,p.dots[0].y),vertex(l.x,l.y),e.endShape(e.CLOSE),e.pop()},thing17=(e,o,t)=>{const{colors:r,type:i,speed:h}=t,[s,c,n]=r;e.background(s);const l={x:e.width/2,y:e.height/2},p=e.width/2,d=e.height/2,a=map(cos(o*h),-1,1,0,i?d:p),g=cos(o*h/2)<0?c:n,f=cos(o*h/2)<0?n:c;e.push(),e.strokeWeight(M),e.rectMode(CENTER),e.stroke(c),e.fill(g),i?(e.line(l.x,.2*d,l.x,e.height-.2*d),e.line(l.x,.2*d,e.width,.2*d),e.line(l.x,e.height-.2*d,e.width,e.height-.2*d),e.noStroke(),e.rect(l.x,l.y,a,d),e.fill(f),e.rect(l.x,l.y,a/2,d/2)):(e.line(.2*p,l.y,e.width-.2*p,l.y),e.line(.2*p,l.y,.2*p,e.height),e.line(e.width-.2*p,l.y,e.width-.2*p,e.height),e.noStroke(),e.rect(l.x,l.y,p,a),e.fill(f),e.rect(l.x,l.y,p,a/2)),e.pop()},array=e=>new Array(e).fill(0).map(((e,o)=>o)),dR4=(e,o,t,r,i,h,s=.7,c)=>{if(--i>=0&&c()<s){let n=t/2,l=r/2;dR4(e,o,n,l,i,h,s,c),dR4(e+n,o,n,l,i,h,s,c),dR4(e+n,o+l,n,l,i,h,s,c),dR4(e,o+l,n,l,i,h,s,c)}else h.push({x:e,y:o,w:t,h:r,n:i})};function rnd(){return seed^=seed<<13,seed^=seed>>17,seed^=seed<<5,(seed<0?1+~seed:seed)%1e3/1e3}function rG(e,o){return rnd()*(o-e)+e}function rF(e,o){return Math.floor(rG(e,o))}function pick(e){return e[rF(0,e.length)]}function shA(e){for(var o,t,r=e.length,i=e.slice();r;)o=Math.floor(rnd()*r--),t=i[r],i[r]=i[o],i[o]=t;return i}function sS(e,o){return shA(e).slice(0,o)}const mDL=(e,o,t,r,i)=>{const h=[];for(let s=0;s<i-1;s+=1){const c=lerp(e,t,s/(i-1)),n=lerp(o,r,s/(i-1));h.push({x:c,y:n})}return h.push({x:t,y:r}),h},mDP=(e,o,t,r,i,h)=>{const s=[];for(let t=0;t<r;t+=1)s.push({x:e+i*cos(h),y:o+i*sin(h)}),h+=360/r;const c=t/r,n=[];for(let e=0;e<r;e+=1)for(let o=0;o<c;o+=1){const t=lerp(s[e].x,s[(e+1)%s.length].x,o/c),r=lerp(s[e].y,s[(e+1)%s.length].y,o/c);n.push({x:t,y:r})}return n},palettes=[["#000000","#ffffff","#c8c8c8"],["#ccc5b9","#403d39","#eb5e28"],["#002642","#840032","#e5dada"],["#0c0a3e","#f9564f","#f3c677"],["#264653","#e9c46a","#e76f51"],["#e63946","#f1faee","#1d3557"],["#2b2d42","#edf2f4","#d90429"],["#003049","#d62828","#eae2b7"],["#14213d","#fca311","#e5e5e5"],["#e0fbfc","#ee6c4d","#293241"],["#011627","#e71d36","#ff9f1c"],["#1a535c","#ff6b6b","#ffe66d"],["#355070","#e56b6f","#eaac8b"],["#283d3b","#197278","#edddd4"],["#2b2d42","#edf2f4","#d80032"],["#ffe066","#247ba0","#70c1b3"],["#ff6700","#ebebeb","#004e98"],["#177e89","#db3a34","#ffc857"],["#b80c09","#fbfbff","#040f16"],["#001427","#f4d58d","#8d0801"],["#1f271b","#28afb0","#f4d35e"],["#e0fbfc","#9db4c0","#253237"],["#001427","#708d81","#f4d58d"],["#0029c1","#f7dc09","#e22b00"],["#0c090d","#f9c22e","#53b3cb"],["#ed1c24","#fdfffc","#020100"],["#fff2cd","#ff004c","#610d4b"],["#fbfef9","#191923","#f39237"],["#ffba08","#3f88c5","#032b43"],["#f1faee","#a8dadc","#1d3557"],["#010000","#ffa100","#f1f2f1"],["#0d3b66","#faf0ca","#f95738"],["#e6eed6","#bbc5aa","#090c02"],["#0d0b0b","#d80056","#ecedef"],["#55827A","#362D2D","#EBA58A"],["#fff3b0","#9e2a2b","#540b0e"],["#0d1b2a","#778da9","#e0e1dd"],["#0c0f0a","#ff206e","#fbff12"],["#2f4550","#b8dbd9","#f4f4f9"],["#ebd4cb","#da9f93","#b6465f"],["#3e92cc","#fffaff","#1e1b18"],["#fecc50","#010b8b","#1e0521"],["#c9e4ca","#3b6064","#364958"]];