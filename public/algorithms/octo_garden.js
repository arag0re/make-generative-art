let wid,R,S,bbx,bby,st,p,seed=parseInt(tokenData.hash.slice(0,8),16);class Random{constructor(t){this.seed=t}rnd_d(){return this.seed^=this.seed<<13,this.seed^=this.seed>>17,this.seed^=this.seed<<5,(this.seed<0?1+~this.seed:this.seed)%1e3/1e3}rnd_bet(t,o){return t+(o-t)*this.rnd_d()}rnd_i(t,o){return Math.floor(this.rnd_bet(t,o+1))}}class Scatter{constructor(){}setup(t,o,l,e,r,c,s,p,d,i,b){this.i=t,this.sp=o,this.o=l,this.rm=e,this.rp=r,this.rt=c,this.os=s,this.fc=p,this.cp=d,this.bs=i,this.bd=b}}let scol,bdcol,blcol,fr,di,ft,frcol,pal=[],ptp=[],ptr=[],ptrad=[],ptc=[];function setup(){wid=Math.min(windowWidth,windowHeight),createCanvas(wid,wid),colorMode(RGB,1),noStroke(),R=new Random(seed),S=new Scatter,bbx=createVector(0,0),bby=createVector(0,0),di=0,st=0;let t=R.rnd_bet(0,1);0==(st=t<.3?0:t<.6?1:t<.9?2:t<.93?3:t<.96?4:5)&&S.setup(400,420,.5,.01,.1,1,1,.5,1,1,.5),1==st&&S.setup(128,420,.5,.001,.25,1,1,.5,1.5,1.2,.5),2==st&&S.setup(400,240,.5,.01,.1,1,1,.5,1,1.2,.5),3==st&&S.setup(420,42,.005,.02,2,0,0,0,.95,1.5,0),4==st&&S.setup(400,42,.5,.01,4,0,0,0,1,2,0),5==st&&S.setup(420,120,.1,.01,4,0,0,0,1.2,2,.5);let o=[],l=[];0==(p=R.rnd_i(0,7))&&(pal=[0,.04,.11,.11,.03,.06,.19,.31,.1,.63,.31,.28,.28,.63,.31,.28,.37,.51,.73,.58,.41,1,.81,.7,1,1,.86,.73],scol=color(.15,.1,.18),bdcol=color(.04,.12,.14),blcol=color(.94,.9,.88)),1==p&&(pal=[0,.06,.06,.06,.07,.22,.3,.28,.18,.37,.56,.43,.56,.94,.9,.47,.63,.98,.84,.78,1,1,.92,.85],scol=color(.27,.15,.15),bdcol=color(.08,.09,.07),blcol=color(.86,.88,.85)),2==p&&(pal=[0,0,.1,.1,.08,0,.2,.2,.22,.73,.26,.14,.54,.98,1,.69,1,1,.99,.99],scol=color(.125,.165,.1),bdcol=color(0,.11,.11),blcol=color(0,.11,.11)),3==p&&(pal=[0,.08,.11,.11,.05,.42,.13,.14,.19,.55,.27,.25,.43,.95,.74,.67,.55,.98,.79,.69,.73,1,.88,.77,1,1,.88,.77],scol=color(.2,.14,.17),bdcol=color(.09,.09,.09),blcol=color(.93,.89,.85)),4==p&&(pal=[0,.13,.09,.09,.24,.15,.45,.5,.29,.7,.41,.21,.41,.99,.63,.54,1,1,.96,.93],scol=color(.1,.14,.17),bdcol=color(.13,.11,.08),blcol=color(.75,.78,.78)),5==p&&(pal=[0,.14,.07,.08,.09,.14,.25,.35,.44,.52,.75,.71,.59,.95,.59,.59,1,1,.88,.77],scol=color(.23,.1,.13),bdcol=color(.13,.1,.08),blcol=color(.87,.87,.86)),6==p&&(pal=[0,.06,.1,.14,.26,.5,.73,.59,.41,.9,.28,.13,.54,1,.58,.4,1,1,.92,.85],scol=color(.2,.1,.1),bdcol=color(.06,.13,.15),blcol=color(.75,.74,.67)),7==p&&(pal=[0,.03,.08,.08,.04,.06,.2,.25,.19,.1,.51,.6,.29,.8,.61,.4,.36,.9,.88,.82,1,1,1,.97],scol=color(.18,.11,.1),bdcol=color(.05,.12,.12),blcol=color(.57,.62,.6));for(let t=0;t<pal.length/4;t++)l[t]=pal[4*t],o[t]=color(pal[4*t+1],pal[4*t+2],pal[4*t+3]);let e=[],r=[];R.rnd_bet(.25,TWO_PI);for(let t=0;t<S.sp;t++){let o=R.rnd_i(0,S.sp-1),l=R.rnd_bet(0,TWO_PI);e[t]=o,r[t]=l}for(let t=0;t<S.i;t++){let c=t/S.i,s=0;0==S.rt?s=pow(abs(c-1),S.rp)*(1-S.rm)+S.rm:(s=pow(c,S.rp)*(1-S.rm)+S.rm,s=1+(S.rm-1)*(s-S.rm)/(1-S.rm));let p=1,d=pow(c,S.cp);for(let t=1;t<o.length;t++)if(d<l[t]){p=t;break}let i=(d-l[p-1])*(1/(l[p]-l[p-1])),b=lerpColor(o[p-1],o[p],i);1==S.os&&(S.o=.6*pow(abs(1-c),12)+.2);for(let o=0;o<S.sp;o++){let l=createVector(0,0),c=0;if(t>0){let r=(t-1)*S.sp+e[o];l=ptp[r],c=ptr[r]}let p=(c+r[o])%TWO_PI,d=createVector(s*cos(p)*2*S.o+l.x,s*sin(p)*2*S.o+l.y);ptp.push(d),ptr.push(p),ptrad.push(s),ptc.push(b),bbx.y=max(d.x+s,bbx.y),bbx.x=min(d.x-s,bbx.x),bby.y=max(d.y+s,bby.y),bby.x=min(d.y-s,bby.x)}}let c=abs(bbx.x-bbx.y),s=abs(bby.x-bby.y),d=bbx.x+.5*c,i=bby.x+.5*s,b=c;if(s>c&&(b=s),b*=S.bs,R.rnd_bet(0,1)<S.fc){let t=createVector(0,0,0),o=createVector(0,0,0);for(let l=0;l<S.sp;l++){let e=ptp[ptp.length-S.sp+l];t.y=max(e.x,t.y),t.x=min(e.x,t.x),o.y=max(e.y,o.y),o.x=min(e.y,o.x)}let l=abs(t.x-t.y),e=abs(o.x-o.y);d=t.x+.5*l,i=o.x+.5*e;let r=l,p=0;e>l&&(r=e,p=1),b=c,1==p&&(b=s),b=r+.5*(b-r)}for(let t=0;t<ptp.length;t++)ptp[t].add(-d,-i),ptp[t].div(b),ptp[t].add(.5,.5),ptrad[t]/=b;fr=0,R.rnd_bet(0,1)<S.bd&&(fr=1,blcol=bdcol),background(blcol),ft=0,3!=st&&4!=st&&5!=st||0==fr&&2!=p&&(ft=1),0==fr&&2!=p&&R.rnd_bet(0,1)>.5&&(ft=1),frcol=blcol,1==ft&&(frcol=lerpColor(blcol,color(1,1,1),.4))}function draw(){let t=.5;if(3!=st&&1!=st||(t=1),noStroke(),di<S.i){let o,l,e,r=di*S.sp;blendMode(DARKEST);for(let c=0;c<S.sp;c++)o=ptp[r+c].x*wid,l=(ptp[r+c].y+(.5*ptrad[r+c]*(.1*pow(di/S.i,4))+.0065))*wid,e=ptrad[r+c]*(1.2*pow(di/S.i,4)+1),scol.setAlpha((.615*abs(1-pow(di/S.i,.2))+.035)*t),fill(scol),circle(o,l,2*e*wid);blendMode(BLEND);for(let t=0;t<S.sp;t++)fill(0,0,0,.15),circle(ptp[r+t].x*wid,ptp[r+t].y*wid,2*ptrad[r+t]*wid+.001*wid);for(let t=0;t<S.sp;t++)fill(ptc[r+t]),circle(ptp[r+t].x*wid,ptp[r+t].y*wid,2*ptrad[r+t]*wid);di++}fill(frcol);rect(0,0,wid,.05*wid),rect(.95*wid,0,wid,wid),rect(0,.95*wid,wid,wid),rect(0,0,.05*wid,wid),0==ft&&(noFill(),stroke(1,1,1,.5),strokeWeight(5e-4*wid),rect(.05*wid,.05*wid,.9*wid,.9*wid))}