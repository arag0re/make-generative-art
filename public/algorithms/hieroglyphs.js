var seed=parseInt(tokenData.hash.slice(0,16),16);class XY{constructor(n,e){this.x=n,this.y=e,this.points=[]}}class Grid{constructor(n){this.x=n,this.y=n,this.g=[]}get_xy(n,e){return this.g[e][n]}}var PALS=[["#000020","#EEEEEE","#FFFFFF00"],["#E2EBFB","#0F1318","#000003"],["#E8175D","#D8A499","#000020"],["#D1ADEF","#80D9FF","#000030"],["#FFAF00","#FBF0D2","#614200"],["#F2D39F","#2A1F30","#000003"],["#E6DDCE","#70C7DB","#C0A95B"],["#C2AFCF","#1E1028","#000003"],["#95CB99","#D8D9DE","#000020"],["#FECB00","#007CBC","#000003"],["#F4F9F9","#7289DA","#000030"],["#949EBB","#D7DDEA","#000003"],["#D8FF14","#FF1FDA","#090036"],["#D9A881","#1F0F08","#000003"],["#B32744","#ED7672","#000003"],["#3AC9CE","#413BCF","#000000"],["#44CCFF","#FFF1D0","#343432"]],C=rnd_arr(PALS),DIM_CNV=Math.min(window.innerWidth,window.innerHeight),ROT=rnd_num()>.6,DIM_M=ROT?rnd_num(1.5,3):1,DIM=DIM_CNV*DIM_M,COUNT=rnd_int(3,20),M=DIM/1e3,MC=M/(COUNT/5),BRD=rnd_int(25,100)*M,SPC=rnd_num()>.5?rnd_int(40,100)*MC:0,SIZ=(DIM-2*BRD-SPC*(COUNT-1))/COUNT,SHADOW=rnd_num()>.25,PARTY_1=rnd_num()>.6,PARTY_2=rnd_num()>.6,BLND=rnd_num()>.8&COUNT<10,SHFT_X=rnd_num(2,4),SHFT_Y=rnd_num(2,4),G=new Grid(COUNT);for(let n=BRD,e=0;n<=DIM-BRD-SIZ+1;n+=SIZ+SPC,e++){let t=[];for(let r=BRD,_=0;r<=DIM-BRD-SIZ+1;r+=SIZ+SPC,_++){let d=new XY(_,e);d.x1=r,d.y1=n,d.x2=r+SIZ,d.y2=n+SIZ,t.push(d)}G.g.push(t)}var p1=get_p(),p2=get_p();function setup(){createCanvas(DIM_CNV,DIM_CNV),background(C[1]),BLND&&blendMode(HARD_LIGHT);for(let n of G.g){PARTY_1&&(p1=get_p(),p2=get_p());for(let e of n)PARTY_2&&(p1=get_p(),p2=get_p()),e.p1=p1,e.p2=p2}ROT&&(push(),translate(DIM/SHFT_X,-DIM/SHFT_Y),rotate(PI/4)),SHADOW&&drw_itr(drw_s),drw_itr(drw_f),ROT&&pop()}function get_p(){let n=[];for(let e=0;e<rnd_int(1,10);e++)n.push([rnd_int(),rnd_int()]);return n}function drw_itr(n){for(let e of G.g)for(let t of e)n(t.p1,t.x1,t.y1,t.x2,t.y2),n(t.p2,t.x1,t.y1,t.x2,t.y2)}function drw_f(n,e,t,r,_){strokeJoin(ROUND),stroke(C[0]),strokeWeight(10*MC),fill(C[0]),beginShape();for(let d of n){let n=[e,r][d[0]],D=[t,_][d[1]];vertex(n,D),endShape(CLOSE)}}function drw_s(n,e,t,r,_){strokeJoin(ROUND),stroke(C[2]),strokeWeight(8*MC),fill(C[2]),beginShape();let d=r-e,D=_-t;for(let o of n){let n=[e,r][o[0]]+.05*d,i=[t,_][o[1]]+.05*D;vertex(n,i),endShape(CLOSE)}}function rnd_dec(){return seed^=seed<<13,seed^=seed>>17,((seed^=seed<<5)<0?1+~seed:seed)%1e3/1e3}function rnd_num(n=0,e=1){return n+(e-n)*rnd_dec()}function rnd_int(n=0,e=1){return Math.floor(rnd_num(n,e+1))}function rnd_arr(n){return n[Math.floor(rnd_num(0,.99*n.length))]}
