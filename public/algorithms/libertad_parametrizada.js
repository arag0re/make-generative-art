const hashPairs=[];for(let j=0;j<32;j++)hashPairs.push(tokenData.hash.slice(2+2*j,4+2*j));const dcP=hashPairs.map(x=>parseInt(x,16));let pts=[{c:["8ecae7","219ebc","023047","ffb703","fb8503"]},{c:["e63945","f1faee","a8dadc","457B9D","1D3557"]},{c:["8ecae7","219ebc","023047","ffb703","fb8500"]},{c:["006d76","83c5be","edf6f9","ffddd2","e29578"]},{c:["003048","d62828","f77f00","fcbf49","eae2b7"]},{c:["f4f1dd","3d405b","81b29a","f2cc8f"]},{c:["ef476e","ffd166","06d6a0","118ab2","073b4c"]},{c:["283d3b","772e25","197278","edddd4","c44536"]},{c:["ffbe0b","fb5607","ff006e","8338ec","3a86ff"]},{c:["9b5de5","f15bb5","fee440","00bbf9","00f5d4"]},{c:["ffbc42","d81159","8f2d56","218380","73d2de"]},{c:["335c67","fff3b0","e09f3e","9e2a2b","540b0e"]},{c:["233d4d","fe7f2d","fcca46","619b8a"]},{c:["227c9d","17c3b2","ffcb77","fef9ef","fe6d73"]},{c:["edae49","d1495b","00798c","30638e","003d5b"]},{c:["ff595e","ffca3a","8ac926","1982c4","6a4c93"]},{c:["2A9D8F","264652","E9C46A","E76F51"]},{c:["2364aa","3da5d9","73bfb8","fec601","ea7317"]},{c:["f8ffe5","06d6a0","1b9aaa","ef476f","ffc43d"]},{c:["586ba4","324376","f5dd90","f68e5f","f76c5e"]},{c:["fbd1a2","7dcfb6","00b2ca","1d4e89"]},{c:["114b5f","028090","e4fde1","456990","f45b69"]},{c:["3a2e39","1e555c","f4d8cd","edb183","f15152"]},{c:["a4243b","d8c99b","d8973c","bd632f","273e47"]},{c:["495867","577399","bdd5ea","f7f7ff","fe5f55"]},{c:["d62839","ba324f","175676","4ba3c3","cce6f4"]}],c_a=[],c_b=[],c_c=[],xa_s=[],xb_s=[],xc_s=[],ya_s=[],yb_s=[],yc_s=[];for(let p=0;p<200;p++)xa_s[p]=p,xb_s[p]=p,xc_s[p]=p,ya_s[p]=p,yb_s[p]=p,yc_s[p]=p;let dn=Math.floor(dcP[1]/265*60+2),m=Math.cbrt(dcP[2]/265*3-1.5);Math.abs(m)<.5&&(m*=3);let bg={h:0,s:0,l:0},qc={h:0,s:0,l:0},lado,clrStl,qFl,stl,op=1,s=1.1,lnta=!1,vg=!1,y_s=0,tlin=.012,tlex=.012,blin=.016,blex=.008,r1=.4,r2=.5,plt=pts[dcP[3]%pts.length],avclrs=JSON.parse(JSON.stringify(plt.c));for(let n=0;n<avclrs.length;n++)avclrs[n]=toHSL(avclrs[n]);function bt(){for(let n=0;n<avclrs.length;n++){var tst=avclrs[n];Math.abs(bg.l-qc.l)<Math.abs(tst.l-qc.l)&&Math.abs(qc.l-bg.l)<26&&(bg={h:tst.h,s:tst.s,l:tst.l})}fr={h:qc.h,s:qc.s,l:qc.l};for(let n=0;n<avclrs.length;n++){let tst=avclrs[n];Math.abs(fr.l-qc.l)<Math.abs(tst.l-qc.l)&&Math.abs(qc.l-fr.l)<25&&tst.l!=bg.l&&(fr={h:tst.h,s:tst.s,l:tst.l})}}let bga=avclrs.splice([dcP[4]%avclrs.length],1);bg=bga[0];let qca=avclrs.splice([dcP[5]%avclrs.length],1);qc=qca[0],bt();let qh,gl={h:qc.h,s:qc.s,l:qc.l},enCapa="0";function fg(){var mc=Math.abs(qc.l-bg.l),sc=Math.abs(qc.l-fr.l);mc<30&&(50<qc.l?bg.l=qc.l-35:bg.l=qc.l+35),sc<20&&(50<qc.l?fr.l=qc.l-25:fr.l=qc.l+25)}let elw=12,elh=28+dcP[7]/256*20,grav=dcP[8]/256*1.2-.6,wind=dcP[9]/256*1.2-.6;64<dcP[10]&&(lnta=!0,vg=!0),192<dcP[10]&&(lnta=!0,vg=!1);let ws,hs,pad=10;dcP[11]<128&&(pad=17,36<elh&&(elh=36));let lbr=pad/100+.05,rbr=1-lbr,hoyo=dcP[6]>205+2*pad;dcP[12]<257&&216<=dcP[12]&&(clrStl="Rumba",80<bg.l&&(bg.l=95)),dcP[12]<208&&(clrStl="Tritone"),dcP[12]<160&&(clrStl="Duotone",95<dcP[12]&&(fr={h:bg.h,s:bg.s/2,l:bg.l},50<=fr.l&&fr.l<=80?fr.l=(100-fr.l)/2+fr.l:fr.l<=50&&20<fr.l?fr.l=fr.l/2:80<fr.l?fr.l=bg.l-20:fr.l<=20&&(fr.l=bg.l+20))),dcP[12]<64&&30<dcP[12]&&(dcP[12]<=48&&30<dcP[12]&&bg.l<75?(clrStl="Mi-Teintes Fun",qc.s=0,dcP[13]<200&&(qFl="Wireframes"),60<bg.l?(qc.l=0,fr.l=100):(qc.l=100,fr.l=0)):(clrStl="Monochrome",qc.l<75&&20<qc.l?(bg={h:qc.h,s:qc.s,l:qc.l},fr={h:qc.h,s:qc.s,l:qc.l}):(bg={h:fr.h,s:fr.s,l:fr.l},qc={h:bg.h,s:bg.s,l:bg.l}),50<qc.l?(bg.l=qc.l-40,fr.l=qc.l+(100-qc.l/2)):(bg.l=qc.l+40,fr.l=qc.l/2),bg.s=5,70<qc.l?fr.l=qc.l-50:qc.l<30&&(fr.l=qc.l+50),80<qc.s&&Math.abs(bg.l-40)<15&&(bg.s=bg.s/4,fr.s=bg.s/2),23<Math.abs(bg.l-50)&&(bg.s=2,fr.s=bg.s/2))),dcP[12]<=30&&(clrStl="Grayscale",bg.s=0,qc.s=0,fr.s=fr.s+(100-fr.s)/2,dcP[12]<28&&(fr.s=0),fg()),dcP[12]<28&&(clrStl="B&W",bg.l=5,fr.l=90,qc.l=95),dcP[12]<17&&(bg.l=95,fr.l=10,qc.l=5),-1<dcP[13]&&(qFl="Wireframes",op=1),95<dcP[13]&&(qFl="Filled",op=1),140<dcP[13]&&(qFl="Translucent",op=.6,"Rumba"==clrStl&&(bg.s=0,fr.s=0,dn<20&&(dn+=10),bg.l<20?fr.l=80:80<bg.l?fr.l=30:bg.l<50?bg.l=bg.l/4:bg.l=.75*(100-bg.l)+bg.l));const seed=parseInt(tokenData.hash.slice(0,16),16);stl=dcP[18]<112?"sharp":"rounded",240<dcP[18]&&(stl="pills");let mg=dcP[21]<96;class Random{constructor(seed){this.seed=seed}random_dec(){return this.seed^=this.seed<<13,this.seed^=this.seed>>17,this.seed^=this.seed<<5,(this.seed<0?1+~this.seed:this.seed)%1e3/1e3}random_between(a,b){return a+(b-a)*this.random_dec()}random_int(a,b){return floor(this.random_between(a,b+1))}random_choice(x){return x[floor(this.random_between(0,.99*x.length))]}}let R=new Random(seed);function setup(){colorMode(HSL),lado=windowWidth<windowHeight?windowWidth:windowHeight,createCanvas(lado,lado),ws=lado/100,hs=lado/100,elw=elw*ws/10,elh=elh*ws/10,dn<24&&15<pad?(elh*=1.8,elw*=1.8):dn<20&&pad<15?(elh*=1.6,elw*=1.6,pad=20,lbr=pad/100+.05,rbr=1-lbr):pad<15&&dcP[12]<196&&(lnta=!0),background(bg.h,bg.s,bg.l);for(let p=0;p<200;p++){var la_x=xa_s.splice(R.random_int(0,xa_s.length),1)/2,la_y=ya_s.splice(R.random_int(0,ya_s.length),1)/2;c_a[p]={xPos:la_x,yPos:la_y}}for(let p=0;p<180;p++){let la_x=xb_s.splice(R.random_int(0,xb_s.length),1)/2,la_y=yb_s.splice(R.random_int(0,yb_s.length),1)/2;c_b[p]={xPos:la_x,yPos:la_y}}for(let p=0;p<160;p++){let la_x=xc_s.splice(R.random_int(0,xc_s.length),1)/2,la_y=yc_s.splice(R.random_int(0,yc_s.length),1)/2;c_c[p]={xPos:la_x,yPos:la_y}}dn<=30&&(y_s="Rumba"==clrStl&&1==hoyo?0:dcP[4]/256-.5)}function draw(){noStroke(),background(bg.h,bg.s,bg.l),enCapa="a";for(let p=0;p<3*dn;p++){p%6==0&&(noStroke(),fill(bg.h,bg.s,bg.l,.06),rect(0,0,windowWidth,windowHeight)),ccx=c_a[p].xPos/100,ccx=(ccx+wind*ccx*(1-ccx))**(1-.5*wind)*(100-2*pad)+pad,c_a[p].yPos=c_a[p].yPos+3*y_s,100<c_a[p].yPos&&(c_a[p].yPos=0),c_a[p].yPos<0&&(c_a[p].yPos=100);let fd=1;c_a[p].yPos<5&&0!=y_s&&(fd=c_a[p].yPos/5),95<c_a[p].yPos&&0!=y_s&&(fd=(100-c_a[p].yPos)/5),stroke(qc.h,qc.s,qc.l,fd),fill(qc.h,qc.s,qc.l,fd),ccy=c_a[p].yPos/100,ccy=(ccy+grav*ccy*(1-ccy))**(1-.5*grav)*(100-2*pad)+pad,cPt(.64*elw,.64*elh,ccx,ccy,m,p)}enCapa="b";for(let p=0;p<2*dn+1;p++){p%4==0&&(noStroke(),fill(bg.h,bg.s,bg.l,.04),rect(0,0,windowWidth,windowHeight)),ccx=c_b[p].xPos/100,ccx=(ccx+wind*ccx*(1-ccx))**(1-.5*wind)*(100-2*pad)+pad,c_b[p].yPos=c_b[p].yPos+2*y_s,100<c_b[p].yPos&&(c_b[p].yPos=0),c_b[p].yPos<0&&(c_b[p].yPos=100);let fd=1;c_b[p].yPos<5&&0!=y_s&&(fd=c_b[p].yPos/5),95<c_b[p].yPos&&0!=y_s&&(fd=(100-c_b[p].yPos)/5),stroke(qc.h,qc.s,qc.l,fd),fill(qc.h,qc.s,qc.l,fd),ccy=c_b[p].yPos/100,ccy=(ccy+grav*ccy*(1-ccy))**(1-.5*grav)*(100-2*pad)+pad,cPt(elw,elh,ccx,ccy,m,p,fd)}var or=pad/100+.05,ld=1-2*or;1==vg&&"Tritone"!=clrStl&&aPt(bg),"Tritone"==clrStl&&(aPt(fr),bg.l<90&&fr.l<90?stroke(255):stroke(fr.h,fr.s-10,fr.l-20),strokeWeight(1+floor(lado/200)),noFill(),hoyo?(circle(lado/2,lado/2,lado*ld),r1=ld/2,r2=.6*ld):rect(lado*or,lado*or,lado*ld,lado*ld)),1==lnta&&"Tritone"!=clrStl&&(stroke(fr.h,fr.s,fr.l),strokeWeight(1+floor(lado/200)),noFill(),hoyo?(circle(lado/2,lado/2,lado*ld),r1=ld/2,r2=.6*ld):rect(lado*or,lado*or,lado*ld,lado*ld)),enCapa="c";for(let p=0;p<dn+2;p++){ccx=c_c[p].xPos/100,ccx=(ccx+wind*ccx*(1-ccx))**(1-.5*wind)*(100-2*pad)+pad,c_c[p].yPos=c_c[p].yPos+y_s,100<c_c[p].yPos&&(c_c[p].yPos=0),c_c[p].yPos<0&&(c_c[p].yPos=100);let fd=1;c_c[p].yPos<5&&0!=y_s&&(fd=c_c[p].yPos/5),95<c_c[p].yPos&&0!=y_s&&(fd=(100-c_c[p].yPos)/5),ccy=c_c[p].yPos/100,ccy=(ccy+grav*ccy*(1-ccy))**(1-.5*grav)*(100-2*pad)+pad;var dist=sqrt(abs(ccx*ws-lado/2)**2+abs(ccy*hs-lado/2)**2);1==hoyo&&dist>lado*r1&&(fd=10*(r2-dist/ws/100),dist>lado*r2&&(fd=0)),stroke(qc.h,qc.s,qc.l,fd),fill(qc.h,qc.s,qc.l,fd),cPt(1.36*elw,1.36*elh,ccx,ccy,m,p,fd)}}function cPt(elw,elh,ccx,ccy,m,p,fd=1){if(r=.5*elw,"pills"==stl&&(r=.98*elw),"sharp"==stl&&(r=0*elw),lHz=(ccx+elw/ws)/100-lbr,rHz=(ccx-elw/ws)/100-rbr,tHz=(ccy+elh/ws)/100-lbr,bHz=(ccy-elh/ws)/100-rbr,-.001<lHz&&lHz<.008&&(ccx=ccx+2e3*lHz+1),-.008<rHz&&rHz<.001&&(ccx=ccx+2e3*rHz+1),0==y_s&&1==lnta){if(tHz>-1*tlex&&tHz<tlin)return;if(bHz>-1*blin&&bHz<blex)return}cx=ccx*ws,cy=ccy*ws-elw*m/2,aix=cx-elw,aiy=cy-elh+r,a1x=cx-elw,a1y=cy-elh+r/3,a2x=cx-elw+r/3,a2y=cy-elh+r/3*(m/2),afx=cx-elw+r,afy=cy-elh+r*m/2,bix=cx+elw-r,biy=cy-elh+elw*m-r*m/2,b1x=cx+elw-r/3,b1y=cy-elh+elw*m-r/3*(m/2),b2x=cx+elw,b2y=cy-elh+elw*m+r/3,bfx=cx+elw,bfy=cy-elh+elw*m+r,cix=cx+elw,ciy=cy+elh+elw*m-r,c1x=cx+elw,c1y=cy+elh+elw*m-r/3,c2x=cx+elw-r/3,c2y=cy+elh+elw*m-r/3*(m/2),cfx=cx+elw-r,cfy=cy+elh+elw*m-r*m/2,dix=cx-elw+r,diy=cy+elh+r*m/2,d1x=cx-elw+r/3,d1y=cy+elh+r/3*(m/2),d2x=cx-elw,d2y=cy+elh-m-r/3,dfx=cx-elw,dfy=cy+elh-r,360<p&&(p-=360),h=floor((ccx+ccy)*s+bg.h+p*s),359<h&&(h-=360),"Wireframes"==qFl?(strokeWeight(.5+lado/500),noFill()):noStroke(),"Rumba"==clrStl?(stroke(h,85,50,fd*op),fill(h,85,50,fd*op),"Wireframes"==qFl?(strokeWeight(.5+lado/500),noFill()):noStroke()):"Tritone"!=clrStl&&"c"==enCapa&&p==dn+1&&abs(gl.l-45)<20&&50<gl.s&&1==mg&&25<ccx&&ccx<75&&25<ccy&&ccy<75&&(fill(gl.h,gl.s,gl.l),"Wireframes"==qFl&&15<dn?(fill(gl.h,gl.s,gl.l,fd),noStroke()):"B&W"==clrStl&&bg.h<180&&strokeWeight(.5+lado/500),(ccy<29||71<ccy)&&(floor(5*ccy)%2!=1&&floor(2*ccy)%3!=2||noFill()),(ccy<27||73<ccy)&&(floor(5*ccy)%3!=0&&floor(2*ccy)%3!=1||noFill())),"sharp"!=stl?(beginShape(),vertex(aix,aiy),bezierVertex(a1x,a1y,a2x,a2y,afx,afy),vertex(bix,biy),bezierVertex(b1x,b1y,b2x,b2y,bfx,bfy),vertex(cix,ciy),bezierVertex(c1x,c1y,c2x,c2y,cfx,cfy),vertex(dix,diy),bezierVertex(d1x,d1y,d2x,d2y,dfx,dfy)):(beginShape(),vertex(aix,aiy),vertex(bix,biy),vertex(cix,ciy),vertex(dix,diy)),endShape(CLOSE)}function toHSL(min){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(min),r=parseInt(l[1],16),g=parseInt(l[2],16),b=parseInt(l[3],16);r/=255,g/=255,b/=255;var h,max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min,s=.5<l?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h=Math.round(360*h),s:s=Math.round(100*s),l:l=Math.round(100*l)}}function aPt(fr){noFill(),stroke(fr.h,fr.s,fr.l),strokeWeight(lado*lbr),rect(lado*lbr/2,lado*lbr/2,lado-lado*lbr,lado-lado*lbr),!0===hoyo&&circle(lado/2,lado/2,lado-lado*lbr)}function keyPressed(){keyCode==RIGHT_ARROW&&wind<.8?wind+=.04:keyCode==LEFT_ARROW&&-.8<wind&&(wind-=.04),keyCode==DOWN_ARROW&&y_s<1&&(y_s+=.01),keyCode==UP_ARROW&&-1<y_s&&(y_s-=.01)," "==key&&(y_s=0),"m"==key&&dn<60&&(dn+=1),"l"==key&&1<dn&&(dn-=1),"s"===key&&save(tokenData.hash+"png")}
