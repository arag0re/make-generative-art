function sfc32(r,n,t,e){return function(){var p=((r|=0)+(n|=0)|0)+(e|=0)|0;return e=e+1|0,r=n^n>>>9,n=(t|=0)+(t<<3)|0,t=(t=t<<21|t>>>11)+p|0,(p>>>0)/4294967296}}let prng=new sfc32(parseInt(tokenData.hash.substr(2,8),16),parseInt(tokenData.hash.substr(10,8),16),parseInt(tokenData.hash.substr(18,8),16),parseInt(tokenData.hash.substr(27,8),16));function rI(r,n){return parseInt(n*r())}function rgbC(r){return"rgb("+r[0]+","+r[1]+","+r[2]+")"}function rgbCB(r,n,t,e){return"rgb("+parseInt(r[0]*t+n[0]*e)+","+parseInt(r[1]*t+n[1]*e)+","+parseInt(r[2]*t+n[2]*e)+")"}function genPal(){return[[[89,83,88],[168,172,61],[255,236,89],[252,127,49]],[[158,0,89],[93,127,218],[182,156,211],[239,121,138]],[[0,50,73],[98,144,195],[234,225,81],[240,135,0]],[[209,41,0],[245,221,82],[46,101,232],[82,184,0]],[[62,137,137],[232,221,181],[187,89,28],[255,204,0]],[[227,126,64],[255,240,203],[78,128,166],[171,212,113]],[[38,38,38],[255,237,145],[209,209,209],[220,0,0]],[[218,172,255],[53,16,83],[140,0,255],[196,196,196]],[[33,33,33],[237,237,237],[255,66,179],[90,255,87]]]}let p=genParams(),c=genColors();function genColors(){let r=genPal(),n=r.splice(rI(prng,r.length),1)[0],t=n.splice(rI(prng,4),1)[0],e=n.splice(rI(prng,3),1)[0],p=n.splice(rI(prng,2),1)[0],a=n.splice(rI(prng,1),1)[0],c=r.splice(rI(prng,r.length),1)[0],s=c.splice(rI(prng,4),1)[0],g=c.splice(rI(prng,3),1)[0],i=c.splice(rI(prng,2),1)[0],u=c.splice(rI(prng,1),1)[0];return{sk_CA:rgbC(e),ca_CA:rgbC(t),ea_CA:rgbC(p),mo_CA:rgbC(a),sk_CB:rgbC(g),ca_CB:rgbC(s),ea_CB:rgbC(i),mo_CB:rgbC(u)}}function genParams(){return{e_S:0==rI(prng,18),e_L:0==rI(prng,54),c_B:0==rI(prng,9),c_R:0==rI(prng,9),m_L:0==rI(prng,3),mo_F:0==rI(prng,3),la_SH:rI(prng,3),ra_SH:rI(prng,3),la_ST:rI(prng,3),ra_ST:rI(prng,3),st_S:rI(prng,5)+3,st_D:rI(prng,1)+1}}function setup(){let r=Math.min(window.innerWidth,window.innerHeight);createCanvas(r,r),noLoop()}function draw(){background(255);let r=Math.min(window.innerWidth,window.innerHeight)/1e3,n=[2,2,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,10,10,10,20,20,20,50,50,100],t=n[rI(prng,n.length)],e=1e3/t;for(let n=0;n<t;n++)for(let a=0;a<t;a++){p.st_S=rI(prng,5)+3,p.st_D=rI(prng,1)+1,p.c_R&&!p.c_B&&t<=5&&(c=genColors());let s=1/650,g=parseInt(p.st_S*s*1e3),i=g+parseInt(p.st_D*s*1e3),u=p.c_B&&0==rI(prng,3)&&t<=10,_=n*e;for(let n=_;n<=_+e;n++){let t=a*e;for(let a=t;a<=t+e;a++)p.e_S&&(wC(a,n,1e3)||wM(a,n,1e3))||(!p.e_L||p.e_S||wC(a,n,1e3)||wM(a,n,1e3))&&(n%i||a%i||(strokeWeight(Math.trunc(r*g)),stroke(sC(a,n,1e3,u)),point(Math.trunc(r*a),Math.trunc(r*n))))}}}function sC(r,n,t,e){return wC(r,n,t)?e?c.ca_CB:c.ca_CA:wM(r,n,t)?e?c.mo_CB:c.mo_CA:wSB(r,n,t)?e?c.sk_CB:c.sk_CA:wEB(r,n,t)?e?c.ea_CB:c.ea_CA:255}function hL(r,n){return.75*n}function wC(r,n,t){return!!wCB(r,n,t)||(!!wCLA(r,n,t)||!!wCRA(r,n,t))}function wCB(r,n,t){let e=t-.1*t,a=e-.63*t,c=.13*t,s=t/2-(p.m_L?-.15:.15)*t;if(r>=s-c/2&&r<=s+c/2&&n<=e&&n>=a)return!0;let g=c/2,i=r-s,u=n-a;return i*i+u*u<=g*g}function wCLA(r,n,t){let e=p.m_L?-.15:.15,a=.11*t,c=.17*t,s=t-.425*t+.35*(0==p.la_SH?0:p.la_SH%2==0?-1:1)*a,g=s-c+.01*(0==p.la_ST?0:p.la_ST%2==0?-1:1)*c,i=.02*t,u=t/2-e*t-.13*t/2-i,_=u-a;if(r>=_&&r<=u&&n<=s&&n>=g)return!0;let o=a/2,l=_+a/2,C=r-l,I=n-g;if(C*C+I*I<=o*o)return!0;let f=r-l,w=n-s;if(f*f+w*w<=o*o)return!0;let h=s+o;return r>=l&&r<=l+o+i&&n<=h&&n>=h-a}function wCRA(r,n,t){let e=p.m_L?-.15:.15,a=.11*t,c=.17*t,s=t-.425*t+.35*(0==p.ra_SH?0:p.ra_SH%2==0?-1:1)*a,g=s-c+.01*(0==p.ra_ST?0:p.ra_ST%2==0?-1:1)*c,i=.02*t,u=t/2-e*t+.13*t/2+i+a,_=u-a;if(r>=_&&r<=u&&n<=s&&n>=g)return!0;let o=a/2,l=_+a/2,C=r-l,I=n-g;if(C*C+I*I<=o*o)return!0;let f=r-l,w=n-s;if(f*f+w*w<=o*o)return!0;let h=s+o;return r>=l-o-i&&r<=l&&n<=h&&n>=h-a}function wSB(r,n,t){return n<=hL(r,t)}function wEB(r,n,t){return n>hL(r,t)}function wM(r,n,t){let e=.1*t,a=t-e-.12*t;p.m_L&&(a=t-a);let c=r-a,s=n-(e+.1*t),g=c*c+s*s<=e*e,i=t-e-.17*t;p.m_L&&(i=t-i);let u=r-i,_=n-(e+.08*t),o=u*u+_*_<=e*e;return g&&(p.mo_F||!o)}
