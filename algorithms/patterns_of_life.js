for(var seed=parseInt(tokenData.hash.slice(0,16),16),p=[],j=0;j<32;j++)p.push(tokenData.hash.slice(2+2*j,4+2*j));var ca,ga,rns=p.map(r=>parseInt(r,16)%10);function CA(r,t,s,i){this.generation=0,this.ruleset=r,this.cols=t,this.rows=s,this.colors=i,this.matrix=new Array(this.cols),this.colorMatrix=new Array(this.cols);for(var o=0;o<this.cols;o++)this.matrix[o]=new Array(this.rows),this.colorMatrix[o]=new Array(this.rows);this.restart=function(){for(var r=0;r<this.cols;r++)for(var t=0;t<this.rows;t++)this.matrix[r][t]=0,this.colorMatrix[r][t]=color(0);this.matrix[this.cols/2][0]=1,this.generation=0},this.restart(),this.randomize=function(){for(var r=0;r<8;r++)this.ruleset[r]=Math.floor(random(2));console.log(this.ruleset)},this.setRule=function(r){this.ruleset=r},this.generate=function(r){for(var t=0;t<this.cols;t++){var s=this.matrix[(t+this.cols-1)%this.cols][this.generation%this.rows],i=this.matrix[t][this.generation%this.rows],o=this.matrix[(t+1)%this.cols][this.generation%this.rows],e=(this.generation+1)%this.rows;this.matrix[t][e]=this.rules(s,i,o),this.colorMatrix[t][e]=this.colorRules(s,i,o)}this.generation++},this.display=function(){for(var r=this.rows-1-this.generation%this.rows,t=0;t<this.cols;t++)ga.fill(this.colorMatrix[r][t]),ga.rect(t,r,1,1)},this.rules=function(r,t,s){var i=parseInt(""+r+t+s,2);return this.ruleset[i]},this.colorRules=function(r,t,s){var i=parseInt(""+r+t+s,2);return this.colors[i]},this.finished=function(){return this.generation>=this.rows}}const size=90;var zoom,colors,current=0,rules=[],boringCount=0;function setup(){var r=Math.min(window.innerWidth,window.innerHeight);createCanvas(r,r),zoom=min(width,height)/size/2,(ga=createGraphics(size,size)).pixelDensity(floor(zoom)+.01),ga.noStroke(),ga.background(0),frameRate(30),colors=[color("#2b2244"),color("#581845"),color("#900C3F"),color("#C70039"),color("#e32c36"),color("#FF5733"),color("#FFC30F"),color("#24fffb")];for(var t=0;t<3;t++){rules[t]=[];for(var s=0;s<8;s++)rules[t][s]=rns[s+8*t]%2}(ca=new CA(rules[0],size,size,colors)).matrix[0].forEach((r,t)=>{ca.matrix[0][t]=rns[t%rns.length]%2})}function draw(){ca.generate(),ca.finished()&&(ca.generation=0,next());var r=!0,t=!0;if(ca.generation<ca.rows-2){var s=ca.generation+2;ca.matrix[s].forEach((s,i)=>{r&=0==s,t&=1==s}),(r||t)&&ca.matrix[s].forEach((r,t)=>{var i=rns[(t+8*s)%rns.length]%2;ca.matrix[s][t]=i,ca.colorMatrix[s][t]=i})}ca.display(ga),translate((width-size*zoom*2)/2,(height-size*zoom*2)/2),scale(zoom),image(ga,0,0),push(),scale(-1,1),image(ga,-180,0),pop(),push(),scale(1,-1),image(ga,0,-180),pop(),push(),scale(-1,-1),image(ga,-180,-180),pop()}function mousePressed(){next()}function next(){++current>=rules.length&&(current=0),ca.setRule(rules[current])}