var lar=window.innerWidth,alt=window.innerHeight;let seed,totCubi,lato,h,hash=tokenData.hash,screenW=lar,screenH=alt,facce=[];function setup(){createCanvas(screenW,screenH),seed=parseInt(tokenData.hash.slice(0,16),16);let t=new Random(seed),e=Math.max(screenW,screenH),s=t.random_between(10,20);lato=int(e/s),totCubi=int(t.random_between(400,600)),h=sqrt(3)*lato/2;let i=int(t.random_between(0,250)),a=int(t.random_between(0,250)),n=int(t.random_between(0,250)),o=int(t.random_between(0,250)),r=int(t.random_between(0,250)),d=int(t.random_between(0,250));background(i,a,n),strokeWeight(lato/80),stroke(o,r,d),translate(-h,-lato),frameRate(5);for(let e=0;e<totCubi;e++){let e=int(t.random_between(0,screenW)),s=int(e-e%h),i=int(t.random_between(0,screenH)),a=i-i%lato,n=int(t.random_between(0,255)),o=int(t.random_between(0,255)),r=int(t.random_between(0,255)),d=int(t.random_between(0,255)),l=int(t.random_between(0,7)),c=t.random_between(0,3),m=0,b=!0,w=15;facce.push(new Faccia(s,a,n,o,r,d,l,c,m,b,w,lato,h))}}function draw(){for(let t=0;t<totCubi;t++)facce[t].disegna()}class Random{constructor(t){this.seed=t}random_dec(){return this.seed^=this.seed<<13,this.seed^=this.seed>>17,this.seed^=this.seed<<5,(this.seed<0?1+~this.seed:this.seed)%1e3/1e3}random_between(t,e){return t+(e-t)*this.random_dec()}random_int(t,e){return Math.floor(this.random_between(t,e+1))}random_choice(t){return t[Math.floor(this.random_between(0,.99*t.length))]}}class Faccia{constructor(t,e,s,i,a,n,h,o,r,d,l,c,m){this.xPos=t,this.yPos=e,this.colR=s,this.colG=i,this.colB=a,this.colT=n,this.decideDimensioni=h,this.randomFaccia=o,this.trasAttuale=r,this.sale=d,this.lato=c,this.h=m,this.incrementoTras=l,this.decideDimensioni>3&&this.decideDimensioni<6&&(this.lato=2*this.lato,this.h=2*this.h),this.decideDimensioni>6&&(this.lato=3*this.lato,this.h=3*this.h)}disegna(){push(),translate(this.xPos,this.yPos),this.sale?this.trasAttuale=this.trasAttuale+this.incrementoTras:this.trasAttuale=this.trasAttuale-this.incrementoTras,this.trasAttuale>this.colT?this.sale=!1:this.trasAttuale<0&&(this.sale=!0),fill(this.colR,this.colG,this.colB,this.trasAttuale),this.randomFaccia<1?(beginShape(),vertex(0,0),vertex(this.h,this.lato/2),vertex(this.h,this.lato/2+this.lato),vertex(0,this.lato),endShape(CLOSE)):this.randomFaccia>1&&this.randomFaccia<2?(beginShape(),vertex(0,0),vertex(this.h,this.lato/2*-1),vertex(this.h,this.lato/2*-1+this.lato),vertex(0,this.lato),endShape(CLOSE)):this.randomFaccia>2&&(beginShape(),vertex(0,0),vertex(this.h,this.lato/2*-1),vertex(2*this.h,0),vertex(this.h,this.lato/2*-1+this.lato),endShape(CLOSE)),pop()}}