var seed=parseInt(tokenData.hash.slice(0,16),16),DS=500,DIM=Math.min(window.innerWidth,window.innerHeight),M=DIM/DS;let lsys,xs,ys,rM=0;const pal=[];let bkg,c,loopLength=240;function setup(){c=createCanvas(window.innerWidth,window.innerHeight,WEBGL),frameRate(30),pal.push("#23c054"),pal.push("#0099dd"),pal.push("#ccc"),pal.push("#fae"),pal.push("#f00"),pal.push("#dd0"),strokeWeight(max(1,1.25*M)),gen()}function draw(){push();let e=2*PI/loopLength,t=frameCount;if(0==rM?(rotateX(sin(xs*PI/2+t*e)*PI/10),rotateY(cos(ys*PI/2+t*e)*PI/10)):1==rM?rotateX(sin(xs*PI/2+t*e)*PI/10):2==rM?rotateY(sin(ys*PI/2+t*e)*PI/10):3==rM?(rotateY(sin(ys*PI/2+t*e)*PI/10),rotateX(sin(xs*PI/2+t*e)*PI/10)):4==rM?(translate(0,40*-M,0),rotateX(sin(1*PI/2)),rotateZ((xs*PI/2+t*e)*PI/10)):(translate(0,40*-M,0),rotateX(sin(1*PI/2)),rotateZ((xs*PI/2+t*e)*PI/10),rotateX(sin(xs*PI/2+t*e)*PI/40),rotateY(cos(ys*PI/2+t*e)*PI/40)),1==lsys.invert){const e=color(255-red(bkg),255-green(bkg),255-blue(bkg));background(e)}else background(str(bkg));lsys.display(),pop()}function gen(){rM=floor(6*rnd_dec()),xs=rnd_dec()<.5?-1:1,ys=rnd_dec()<.5?-1:1,lsys=new LayerSys,timer=millis(),bkg=rnd_dec()<.3?"#151620":rnd_dec()<.5?"#171717":rnd_dec()<.25?"#23231A":"#201010"}class LayerSys{constructor(e,t){this.layers=[],this.ww=e,this.hh=t,this.nRad=10+20*rnd_dec(),this.innerN=2+10*rnd_dec(),this.outterN=2+10*rnd_dec(),this.invert=rnd_dec()<.2?1:0,this.createLayers()}display(){for(let e=0;e<this.layers.length;e++)this.layers[e].display()}createLayers(){const e=4+6*rnd_dec();let t=pal.length;var s=rnd_dec()<.17?0:1,r=floor(8*rnd_dec()),i=rnd_dec()<.17?0:1,n=rnd_dec()<.4?0:1;let d=floor(rnd_dec()*t);const o=this.invert;for(let l=0;l<e;l++)1==s&&(r=floor(8*rnd_dec())),1==i&&(d=floor(rnd_dec()*t)),this.layers.push(new Layer(l,this.nRad,this.innerN,this.outterN,d,r,i,e,n,o))}}function rnd_dec(){return seed^=seed<<13,seed^=seed>>17,((seed^=seed<<5)<0?1+~seed:seed)%1e3/1e3}function rnd_num(e,t){return e+(t-e)*rnd_dec()}class Layer{constructor(e,t,s,r,i,n,d,o,l,a){this.innerN=s,this.outterN=r,this.ind=e,this.nRad=t,this.colorSel=i,this.mode=n,this.colorMode=d,this.nLayers=o,this.radiusMode=l,this.invert=a}display(){push(),translate(0,0,10*this.ind*M-60*M),this.drawLayer(),pop()}drawLayer(){let e,t,s=this.nRad,r=(100+12*this.ind)*M,i=(30+7*this.ind)*M,n=2*PI/float(s-1),d=str(pal[this.colorSel]);if(1==this.invert&&(d=color(255-red(d),255-green(d),255-blue(d))),0==this.colorMode){let e=1*(this.ind+1)/(this.nLayers+1);stroke(red(d)*e+(1-e)*red(bkg),green(d)*e+(1-e)*green(bkg),blue(d)*e+(1-e)*blue(bkg))}else{let e=1*this.ind/this.nLayers;stroke(red(d)*e+(1-e)*red(bkg),green(d)*e+(1-e)*green(bkg),blue(d)*e+(1-e)*blue(bkg))}fill(0,0),noFill(),4!=this.mode&&5!=this.mode||beginShape();for(let d=0;d<s;d++){let l=20*sin(d*n*this.outterN+this.ind)*M*this.radiusMode,a=cos(d*n)*(r+l),h=sin(d*n)*(r+l),c=10*sin(d*n*this.innerN+this.ind)*M*this.radiusMode,u=cos(d*n)*(i+c),p=sin(d*n)*(i+c);if(0==d){e=a,t=h;let i=0,d=cos(s*n)*(r+i),o=sin(s*n)*(r+i);curveVertex(d,o)}if(0==this.mode||2==this.mode){a>0?(line(a,h,a+30*M,h),fill(str(pal[this.colorSel])),rect(a+30*M,h,2*M,2*M)):line(a,h,a-30*M,h);let e=20*M;noFill(),2==this.mode&&rect(a-e/2,h-e/2,e,e),line(a-e/2,h-e/2,0,a-e/2,h-e/2,2*e)}if(1==this.mode&&line(a,h,u,p),3==this.mode){let e=50*M;line(a,h,0,a,h,e),line(u,p,0,u,p,e);var o=.25*e;line(a,h-o,a,h+o),line(u-o,p,e,u+o,p,e)}if(4==this.mode||6==this.mode){let e=5*M;curveVertex(a,h),rect(u-e/2,p-e/2,e,e)}else if(5==this.mode){let e=5*M;curveVertex(u,p),rect(a-e/2,h-e/2,e,e)}if(6==this.mode)for(let e=0;e<4;e++){let t=e*PI/200,s=10*e*M*(this.ind+1),r=cos(d*n-t)*s,i=sin(d*n-t)*s,o=cos(d*n+t)*s,l=sin(d*n+t)*s;line(r,i,o,l)}7==this.mode&&(push(),translate(a,h),rotate(d*n-PI/2),triangle(10*M,0,0-10*M,0,0,0+50*M),line(0,0+50*M,0,0,0+50*M,75*M),pop(),push(),translate(u,p),rotate(d*n+PI/2),triangle(10*M,0,0-10*M,0,0,0+50*M),d%2==0&&line(0,0+50*M,0,0,0+50*M,50*M),pop())}4!=this.mode&&5!=this.mode||endShape(CLOSE)}}