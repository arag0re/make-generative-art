var Delaunay,size,trg1,trg2,right_origami,left_origami,cur_right_origami,cur_left_origami,stars1,stars2,current_kanji,fg_color;!function(){"use strict";var i=1/1048576;function n(n,l,e,r){var t,a,o,s,g,h,u,c,_,m,d=n[l][0],w=n[l][1],f=n[e][0],p=n[e][1],x=n[r][0],v=n[r][1],k=Math.abs(w-p),z=Math.abs(p-v);if(!(k<i&&z<i))return k<i?a=(s=-(x-f)/(v-p))*((t=(f+d)/2)-(h=(f+x)/2))+(c=(p+v)/2):z<i?a=(o=-(f-d)/(p-w))*((t=(x+f)/2)-(g=(d+f)/2))+(u=(w+p)/2):(t=((o=-(f-d)/(p-w))*(g=(d+f)/2)-(s=-(x-f)/(v-p))*(h=(f+x)/2)+(c=(p+v)/2)-(u=(w+p)/2))/(o-s),a=k>z?o*(t-g)+u:s*(t-h)+c),{i:l,j:e,k:r,x:t,y:a,r:(_=f-t)*_+(m=p-a)*m}}function l(i){var n,l,e,r,t,a;for(l=i.length;l;)for(r=i[--l],e=i[--l],n=l;n;)if(a=i[--n],e===(t=i[--n])&&r===a||e===a&&r===t){i.splice(l,2),i.splice(n,2);break}}Delaunay={triangulate:function(e,r){var t,a,o,s,g,h,u,c,_,m,d,w,f=e.length;if(f<3)return[];if(e=e.slice(0),r)for(t=f;t--;)e[t]=e[t][r];for(o=new Array(f),t=f;t--;)o[t]=t;if(o.sort(function(i,n){return e[n][0]-e[i][0]}),s=function(i){var n,l,e,r,t,a,o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(n=i.length;n--;)i[n][0]<o&&(o=i[n][0]),i[n][0]>g&&(g=i[n][0]),i[n][1]<s&&(s=i[n][1]),i[n][1]>h&&(h=i[n][1]);return e=h-s,[[(t=o+.5*(l=g-o))-20*(r=Math.max(l,e)),(a=s+.5*e)-r],[t,a+20*r],[t+20*r,a-r]]}(e),e.push(s[0],s[1],s[2]),null==n(e,f+0,f+1,f+2))return[];for(g=[n(e,f+0,f+1,f+2)],h=[],u=[],t=o.length;t--;u.length=0){for(w=o[t],a=g.length;a--;)(c=e[w][0]-g[a].x)>0&&c*c>g[a].r?(h.push(g[a]),g.splice(a,1)):c*c+(_=e[w][1]-g[a].y)*_-g[a].r>i||(u.push(g[a].i,g[a].j,g[a].j,g[a].k,g[a].k,g[a].i),g.splice(a,1));for(l(u),a=u.length;a;)d=u[--a],m=u[--a],g.push(n(e,m,d,w))}for(t=g.length;t--;)h.push(g[t]);for(g.length=0,t=h.length;t--;)h[t].i<f&&h[t].j<f&&h[t].k<f&&g.push(h[t].i,h[t].j,h[t].k);return g},contains:function(i,n){if(n[0]<i[0][0]&&n[0]<i[1][0]&&n[0]<i[2][0]||n[0]>i[0][0]&&n[0]>i[1][0]&&n[0]>i[2][0]||n[1]<i[0][1]&&n[1]<i[1][1]&&n[1]<i[2][1]||n[1]>i[0][1]&&n[1]>i[1][1]&&n[1]>i[2][1])return null;var l=i[1][0]-i[0][0],e=i[2][0]-i[0][0],r=i[1][1]-i[0][1],t=i[2][1]-i[0][1],a=l*t-e*r;if(0===a)return null;var o=(t*(n[0]-i[0][0])-e*(n[1]-i[0][1]))/a,s=(l*(n[1]-i[0][1])-r*(n[0]-i[0][0]))/a;return o<0||s<0||o+s>1?null:[o,s]}},"undefined"!=typeof module&&(module.exports=Delaunay)}(),p5.disableFriendlyErrors=!0;var kanji_bk,kanji_fg,time=!0;function dream(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.08*n,2*lin,.92*n,2*lin),i.line(n/3.2,lin,n/3.2,3*lin),i.line(n-n/3.2,lin,n-n/3.2,3*lin),i.line(2*linw,4.3*lin,n-2*linw,4.3*lin),i.line(2*linw,6.6*lin,n-2*linw,6.6*lin),i.line(2*linw,4.3*lin,2*linw,6.6*lin),i.line(n-2*linw,4.3*lin,n-2*linw,6.6*lin),i.line(n/1.62,4.3*lin,n/1.62,6.6*lin),i.line(n-n/1.62,4.3*lin,n-n/1.62,6.6*lin),i.line(.07*n,8*lin,.93*n,8*lin),i.line(linw/2,8*lin,linw/2,10*lin),i.line(n-linw/2,8*lin,n-linw/2,10*lin),i.noFill(),i.curve(n/1.9,0,n/2.3,8.5*lin,.1*n,11.5*lin,0,10*lin),i.line(.36*n,10*lin,n-.3*n,10*lin),i.noFill(),i.curve(.8*n,0,n-.26*n,10.2*lin,.1*n,15*lin,0,13.5*lin),i.line(.3*n,11*lin,.5*n,12.5*lin),i.resetMatrix()}function tree(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.12*n,4*lin,.88*n,4*lin),i.line(n/2,1.8*lin,n/2,13.5*lin),i.noFill(),i.curve(0,0,n/2,4*lin,.1*n,11*lin,0,6*lin),i.curve(n,0,n/2,4*lin,.9*n,11*lin,n,6*lin),i.resetMatrix()}function book(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.12*n,4*lin,.88*n,4*lin),i.line(n/2,1.8*lin,n/2,13.5*lin),i.noFill(),i.curve(0,0,n/2,4*lin,.1*n,11*lin,0,6*lin),i.curve(n,0,n/2,4*lin,.9*n,11*lin,n,6*lin),i.line(.3*n,11*lin,.7*n,11*lin),i.resetMatrix()}function fire(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.noFill(),i.curve(0,3*-n,n/2,2*lin,.1*n,13*lin,-n/2,6*lin),i.curve(n,3*-n,n/2,2*lin,.9*n,13*lin,1.5*n,6*lin),i.curve(n/4,0,n/4.5,5.5*lin,.1*n,8*lin,0,8*lin),i.curve(n,0,.9*n,5.5*lin,.8*n,8*lin,n/1.7,n),i.resetMatrix()}function ashes(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.noFill(),i.curve(0,2*-n,.57*n,4.5*lin,.25*n,13*lin,-n/2,10*lin),i.curve(n,2*-n,.57*n,4.5*lin,.9*n,13*lin,1.5*n,10*lin),i.curve(n/3,0,n/2.7,7*lin,.3*n,9*lin,.2*n,8*lin),i.curve(1.1*n,0,.87*n,7*lin,.78*n,9*lin,n/1.6,n),i.curve(.1*n,0,.2*n,3*lin,.1*n,13*lin,0,lin),i.line(.18*n,3*lin,.88*n,3*lin),i.resetMatrix()}function rain(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.12*n,2*lin,.88*n,2*lin),i.line(n/2,2*lin,n/2,14*lin),i.line(.1*n,5*lin,.9*n,5*lin),i.line(.1*n,5*lin,.1*n,14*lin),i.line(.9*n,5*lin,.9*n,12*lin),i.noFill(),i.curve(.8*n,12*lin,.9*n,12*lin,12.5*linw,14*lin,0,13*lin),i.line(3.7*linw,7*lin,5.7*linw,8.3*lin),i.line(3.7*linw,10*lin,5.7*linw,11.3*lin),i.line(10.2*linw,7*lin,12.2*linw,8.3*lin),i.line(10.2*linw,10*lin,12.2*linw,11.3*lin),i.resetMatrix()}function mountain(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(n/2,2*lin,n/2,13*lin),i.line(.1*n,5*lin,.1*n,14*lin),i.line(.9*n,5*lin,.9*n,14*lin),i.line(.1*n,13*lin,.9*n,13*lin),i.resetMatrix()}function moon(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.3*n,2*lin,.8*n,2*lin),i.line(.3*n,5.5*lin,.8*n,5.5*lin),i.line(.3*n,9*lin,.8*n,9*lin),i.line(.8*n,2*lin,.8*n,12*lin),i.line(.3*n,2*lin,.3*n,5.5*lin),i.noFill(),i.curve(.3*n,3*-n,.3*n,5.5*lin,.15*n,14*lin,0,12*lin),i.curve(.7*n,12*lin,.8*n,12*lin,10.5*linw,14*lin,0,13*lin),i.resetMatrix()}function sky(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.08*n,3*lin,.92*n,3*lin),i.line(n/2,1.5*lin,n/2,3*lin),i.line(.08*n,13.5*lin,.92*n,13.5*lin),i.line(n/2,13.5*lin,n/2,9.3*lin),i.line(.15*n,9.3*lin,.85*n,9.3*lin),i.line(.08*n,3*lin,.08*n,5*lin),i.line(.92*n,3*lin,.92*n,5*lin),i.line(.6*n,3*lin,.6*n,7*lin),i.line(.6*n,7*lin,.8*n,7*lin),i.line(.84*n,6.5*lin,.8*n,7*lin),i.noFill(),i.curve(.4*n,-n,.4*n,3*lin,.15*n,7.5*lin,-n,7.5*lin),i.resetMatrix()}function poetry(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.1*n,2*lin,.3*n,2*lin),i.line(.05*n,4*lin,.35*n,4*lin),i.line(.1*n,6*lin,.3*n,6*lin),i.line(.1*n,8*lin,.3*n,8*lin),i.line(.1*n,10*lin,.3*n,10*lin),i.line(.1*n,10*lin,.1*n,13.6*lin),i.line(.3*n,10*lin,.3*n,13*lin),i.line(.1*n,13*lin,.3*n,13*lin),i.line(.53*n,3*lin,.82*n,3*lin),i.line(.68*n,2*lin,.68*n,5.7*lin),i.line(.45*n,5.7*lin,.9*n,5.7*lin),i.line(.45*n,8.1*lin,.9*n,8.1*lin),i.noFill(),i.curve(.75*n,2*-n,.77*n,.5*n,.6*n,13.5*lin,0,lin),i.line(.5*n,10.1*lin,.55*n,11.1*lin),i.resetMatrix()}function death(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.05*n,3*lin,.92*n,3*lin),i.line(.6*n,8*lin,.9*n,6.5*lin),i.line(.6*n,3*lin,.6*n,12*lin),i.noFill(),i.curve(.6*n,0,.6*n,12*lin,.65*n,13.5*lin,.65*n,1.2*n),i.line(.65*n,13.5*lin,.85*n,13.5*lin),i.curve(.85*n,1.2*n,.85*n,13.5*lin,.9*n,12*lin,.9*n,0),i.line(.9*n,12*lin,.9*n,11*lin),i.curve(0,0,.3*n,3*lin,.05*n,9*lin,0,.6*n),i.line(.25*n,6*lin,.4*n,6*lin),i.curve(0,0,.4*n,6*lin,.05*n,13.5*lin,0,.6*n),i.line(.2*n,9*lin,.3*n,9.5*lin),i.resetMatrix()}function soul(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(.07*n,2.6*lin,.27*n,2.6*lin),i.line(.45*n,2.5*lin,.9*n,2.5*lin),i.line(.45*n,5*lin,.9*n,5*lin),i.line(.45*n,7.5*lin,.9*n,7.5*lin),i.line(.45*n,2.5*lin,.45*n,7.5*lin),i.line(.9*n,2.5*lin,.9*n,7.5*lin),i.line(.675*n,2.5*lin,.675*n,7.5*lin),i.line(.63*n,2.5*lin,.675*n,1.5*lin),i.line(.01*n,6.2*lin,.33*n,6.2*lin),i.line(.15*n,6.2*lin,.05*n,10.5*lin),i.line(0,11*lin,.25*n,10.3*lin),i.line(.27*n,8.5*lin,.33*n,11*lin),i.line(.7*n,7.5*lin,.7*n,12*lin),i.noFill(),i.curve(.7*n,0,.7*n,12*lin,.75*n,13.5*lin,.75*n,1.2*n),i.line(.75*n,13.5*lin,.85*n,13.5*lin),i.curve(1.1*n,1.2*n,.85*n,13.52*lin,.95*n,12*lin,n,0),i.curve(.3*n,2*-n,.53*n,7.5*lin,.25*n,14*lin,0,n),i.strokeWeight(e/2),i.line(.86*n,9*lin,.81*n,10.9*lin),i.line(.8*n,10.9*lin,.92*n,10.5*lin),i.line(.915*n,9.9*lin,.94*n,10.7*lin),i.resetMatrix()}function sea(i,n,l,e){lin=n/16,n=n/4*3,linw=n/16,i.translate(l,0),i.line(6.3*linw,4*lin,16*linw,4*lin),i.noFill(),i.curve(4.9*linw,0,6.9*linw,2.3*lin,3.9*linw,6*lin,0,5*lin),i.line(0,2.5*lin,1.7*linw,3.5*lin),i.line(0,5.8*lin,1.7*linw,6.8*lin),i.line(1.7*linw,10.5*lin,0,14*lin),i.line(3.1*linw,8.5*lin,16*linw,8.5*lin),i.line(6.8*linw,5.8*lin,4.8*linw,13*lin),i.line(6.8*linw,5.8*lin,14*linw,5.8*lin),i.line(10.8*linw,5.8*lin,9*linw,12*lin),i.line(6*linw,12*lin,16*linw,12*lin),i.curve(.88*n,2*-n,.9*n,.485*n,.63*n,14*lin,0,2*lin),i.resetMatrix()}var special_ed=!1;function setup(){min_dim=min(windowHeight,windowWidth),createCanvas(min_dim,min_dim),size=min_dim/4.1,randomSeed(parseInt(tokenData.hash.slice(0,16),16)),random()<.05?(fg_color=color(220),special_ed=!0):fg_color=color(random(0,255),random(0,255),random(0,255)),kanjis=[dream,book,tree,fire,ashes,rain,mountain,moon,sky,poetry,death,soul,sea],current_kanji=random(kanjis),kanji_bk=createGraphics(size/3,size/3),kanji_fg=createGraphics(size/3,size/3),kanji_bk.background(0,0),kanji_bk.stroke(fg_color),kanji_bk.strokeWeight(size/3/16),kanji_bk.strokeCap(ROUND),current_kanji(kanji_bk,size/3,(size/3-size/4)/2,size/3/16),kanji_fg.background(0,0),kanji_fg.stroke(150),kanji_fg.strokeWeight(size/100),kanji_fg.strokeCap(SQUARE),current_kanji(kanji_fg,size/3,(size/3-size/4)/2,size/100),map1=[],map2=[],right_origami=[],left_origami=[];for(var i=0;i<13;i++){var n={x:random(0,width/2-size),y:random(height/3,height-height/3),mult_x:int(random(1,4)),mult_y:int(random(1,8)),var_x:random(size/10,size/5),var_y:random(size/10,size/5)};point1={},Object.assign(point1,n),point1.x=width/2+n.x,right_origami[i]=point1,point2={},Object.assign(point2,n),point2.x=width/2-n.x,point2.mult_x=-1*n.mult_x,left_origami[i]=point2}for(i=0;i<right_origami.length;i++)map1[i]=[right_origami[i].x,right_origami[i].y];for(i=0;i<left_origami.length;i++)map2[i]=[left_origami[i].x,left_origami[i].y];trg1=Delaunay.triangulate(map1),trg2=Delaunay.triangulate(map2),cur_right_origami=[],cur_left_origami=[];for(i=0;i<right_origami.length;i++)p=right_origami[i],r=random(0,2*PI),cur_right_origami.push({x:p.x+p.var_x*sin(r*p.mult_x),y:p.y+p.var_y*cos(r*p.mult_y)}),p=left_origami[i],cur_left_origami.push({x:p.x+p.var_x*sin(r*p.mult_x),y:p.y+p.var_y*cos(r*p.mult_y)});function l(i,n,l,e,r,t){r.background(0,0),r.noStroke(),r.fill(random(0,t),random(0,t),random(0,t),255);for(var a=e-1;a>=0;a--)randx=random(),randy=random(),rands=random(),r.circle(i*randx,n*randy,l*rands)}stars1=createGraphics(width,height),stars2=createGraphics(width,height/2),l(width,height,size/50,100,stars1,255),l(width,height/2,size/75,100,stars2,125)}var strobe=100,rand=1;function draw(){background(15,15,30);var i,n=millis();if(drawingContext.shadowBlur=size/15+size/100*rand,drawingContext.shadowColor=color(255),imageMode(CORNER),i=0+height/(2*PI)*(314159e-9*n%(2*PI)),image(stars2.get(),0,-height/2+i/2),image(stars2.get(),0,0+i/2),image(stars2.get(),0,height/2+i/2),image(stars2.get(),0,height+i/2),image(stars1.get(),0,-height+i),image(stars1.get(),0,i),image(stars1.get(),0,height+i),time){var l=millis();cur_right_origami=[],cur_left_origami=[];for(var e=0;e<right_origami.length;e++)p=right_origami[e],cur_right_origami.push({x:p.x+p.var_x*sin(628319e-9*l*p.mult_x),y:p.y+p.var_y*cos(628319e-9*l*p.mult_y)}),p=left_origami[e],cur_left_origami.push({x:p.x+p.var_x*sin(628319e-9*l*p.mult_x),y:p.y+p.var_y*cos(628319e-9*l*p.mult_y)})}drawingContext.shadowBlur=0,strokeWeight(size/200),stroke(150,strobe),noFill(),special_ed?(beginShape(),vertex(.5*width-size/6,.8*height),vertex(.5*width,.8*height-size/6),vertex(.5*width+size/6,.8*height),vertex(.5*width,.8*height+size/6),endShape(CLOSE)):circle(.5*width,.8*height,size/3),drawingContext.shadowBlur=size/10+size/21*rand,fg_color.setAlpha(255),drawingContext.shadowColor=fg_color,fg_color.setAlpha(strobe),stroke(fg_color),strokeWeight(size/50),noFill(),special_ed?(beginShape(),vertex(.5*width-size/6,.8*height),vertex(.5*width,.8*height-size/6),vertex(.5*width+size/6,.8*height),vertex(.5*width,.8*height+size/6),endShape(CLOSE)):circle(.5*width,.8*height,size/3),drawingContext.shadowBlur=0,noStroke(),fill(150,strobe),circle(.5*width,.8*height,size/24),drawingContext.shadowBlur=size/10+size/21*rand,fg_color.setAlpha(255),drawingContext.shadowColor=fg_color,noStroke(),fg_color.setAlpha(strobe),fill(fg_color),circle(.5*width,.8*height,size/20),drawingContext.shadowBlur=size/10+size/21*rand,fg_color.setAlpha(255),drawingContext.shadowColor=fg_color,imageMode(CENTER),tint(255,strobe),image(kanji_fg,width/2,.2*height),image(kanji_bk,width/2,.2*height),noTint(),drawingContext.shadowBlur=size/10+size/21*rand,fg_color.setAlpha(255),drawingContext.shadowColor=fg_color,strokeWeight(size/150),fg_color.setAlpha(strobe),stroke(fg_color),fill(255,235);for(var r=0;r<trg1.length;r+=3)triangle(cur_right_origami[trg1[r]].x,cur_right_origami[trg1[r]].y,cur_right_origami[trg1[r+1]].x,cur_right_origami[trg1[r+1]].y,cur_right_origami[trg1[r+2]].x,cur_right_origami[trg1[r+2]].y),triangle(cur_left_origami[trg2[r]].x,cur_left_origami[trg2[r]].y,cur_left_origami[trg2[r+1]].x,cur_left_origami[trg2[r+1]].y,cur_left_origami[trg2[r+2]].x,cur_left_origami[trg2[r+2]].y);rand=Math.random(),strobe=n>1e3&&rand<.1?25:100}function mouseClicked(){time=!time}