var RNDS,_r,CMX,LOAD,CSZ,TTL,SQR,E,DIM=Math.min(window.innerWidth,window.innerHeight),M=DIM/1e3,D2=DIM/2,RSP=1e-4,_H=[];function setup(){createCanvas(DIM,DIM),strokeWeight(M),noFill();for(let t=0;t<32;t++)_H.push(parseInt(tokenData.hash.slice(2+2*t,4+2*t),16)/256);_r=parseInt(tokenData.hash.slice(0,16),16),CMX=.05+.2*_H[2],LOAD=-.1-.4*_H[3],TTL=40,CSZ=.25<_H[4]?(SQR=.5<_H[9])?.5<_H[4]?.75:.98:.61:(SQR=1,1.1);var e=parseInt(50+200*_H[0]),s=.6-.4*_H[0],a=1+_H[0],t="#001abf",i="#008044",o="#ffc800",n="#d00900",h="#df60b0",l="#004080",o=[[t,i,o,n,h],[t,i,o,"#ff0900"],[t,o,n,h],[n,o,h],[i,h],[i,o],[l,h],[l,i],[n],[h],[o],["#404040"]],d=o[parseInt(_H[5]*o.length)];RNDS=_H[8]<.1?(background("#00041f"),blendMode(SCREEN),24e3):(background("#fff8e0"),blendMode(MULTIPLY),32e3),E={col:d[0]};for(let t=0;t<e;t++)Node.add(d[t%d.length],r(s),vectr(a))}function draw(){translate(D2,D2);for(var t=millis();beginShape(),E=new Energy(E.col,TTL,vectr()),endShape(),millis()-t<30&&--RNDS;);RNDS||noLoop()}function r(t=1,e=0){return _R()*(t-e)+e}function vectr(t=1){return createVector(1,0).rotate(_R()*TWO_PI).mult(r(t))}function _R(){return _r^=_r<<13,_r^=_r>>17,((_r^=_r<<5)<0?1+~_r:_r)%1e3/1e3}Energy=class{constructor(t,e,r){this.col=color(t),this.nrg=e,this.p=r,this.draw()}draw(){var t=Node.gravity(this);this.p.add(t);t=24+16*(1-Math.sqrt(1/this.nrg));this.col.setAlpha(t),stroke(this.col),(SQR&&Math.abs(this.p.x)<CSZ&&Math.abs(this.p.y)<CSZ||!SQR&&this.p.magSq()<CSZ)&&(vertex(this.p.x*D2,this.p.y*D2),1<--this.nrg&&this.draw())}mix(t){var e=1-CMX;this.col=color(red(this.col)*e+red(t)*CMX,green(this.col)*e+green(t)*CMX,blue(this.col)*e+blue(t)*CMX)}},Node=class{constructor(t,e,r){this.col=t,this.mag=e,this.pos=r,this.L=LOAD}static gravity(a){let i=vectr(0);for(let s=0;s<Node._n.length;s++){let t=Node._n[s],e=t.pos.copy(),r=e.dist(a.p);r&&(e.sub(a.p),e.setMag(t.getMag()/(100*r)),i.add(e),r<t.mag/2?(a.mix(t.col),t.unload()):t.reload())}return i}static add(t,e,r,s){Node._n=Node._n||[],Node._n.push(new Node(t,e,r))}getMag(){return this.mag*this.L}reload(){this.L<1&&(this.L+=RSP*RSP*this.mag)}unload(){-1<this.L&&(this.L-=RSP*this.mag)}};