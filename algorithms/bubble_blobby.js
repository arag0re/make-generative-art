let t=window;var e=t.location.search;let a=new URLSearchParams(e);let o=tokenData.hash,c=a.get("q")||3,f=[1,1.5,2,2.5,3];var r="canvas";let n=document,i=n.body.appendChild(n.createElement(r)),l;G(!1),i.id=r,i.getContext("webgl",{preserveDrawingBuffer:!0});let v=n.createElement("style");var d="-webkit-fill-available",e="center";function s(){L?E+=(Date.now()-k)/1e3:k=Date.now(),L=!L}function p(e){c=e,G(),L&&s()}v.innerHTML=`body{background:#000;min-height:100vh;min-height:${d};margin:0;display:flex;justify-content:${e};align-items:${e}}html{height:${d}}input{position:fixed}`,n.head.appendChild(v),n.addEventListener("keyup",e=>{var t=e.code,a="Digit",c="Numpad";if("Space"===t)s();else if("KeyS"===t)Z=!0;else if("KeyP"===t)A=!0;else if(t===a+"1"||t===a+"2"||t===a+"3"||t===a+"4"||t===a+"5"||t===c+"1"||t===c+"2"||t===c+"3"||t===c+"4"||t===c+"5")p(e.key);else if("KeyH"==t){let e=n.createElement("input");e.type="text",e.value=o,n.body.appendChild(e),e.select(),n.execCommand("copy"),n.body.removeChild(e)}});r=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent);function b(e){let t=n.createElement("a");t.setAttribute("download",o+(e?"-print":"")+".png"),i.toBlob(function(e){e=URL.createObjectURL(e);t.setAttribute("href",e),t.click()})}r&&n.body.addEventListener("click",function(){p(c%5+1)});e=[-2,0,0,-2,2,2];let h=[0,0,0,0],u="linear",m="half float";d="OES_texture_half_float";let x=createREGL({canvas:i,extensions:[d,d+"_"+u]});var g,d="precision highp float;attribute vec2 p;varying vec2 vUv;void main(){vUv=p;gl_Position=vec4(2.*p.x-1.,1.-2.*p.y,0,1);}";let y=x({frag:"precision highp float;varying vec2 vUv;uniform sampler2D tx;uniform float tm,sh,se;const vec4 q=vec4(1111.1111,3141.5926,2718.2818,0);vec4 F(vec4 a){return a-floor(a*(1./289.))*289.;}float I(float a){return a-floor(a*(1./289.))*289.;}vec4 m(vec4 a){return F((a*34.+1.)*a);}float n(float a){return I((a*34.+1.)*a);}vec4 G(vec4 a){return 1.792843-.853735*a;}float J(float a){return 1.792843-.853735*a;}vec4 j(float d,vec4 c){const vec4 e=vec4(1.,1.,1.,-1.);vec4 a,b;a.xyz=floor(fract(vec3(d)*c.xyz)*7.)*c.z-1.;a.w=1.5-dot(abs(a.xyz),e.xyz);b=vec4(lessThan(a,vec4(0.)));a.xyz=a.xyz+(b.xyz*2.-1.)*b.www;return a;}float o(vec4 k){const vec4 d=vec4(.138197,.276393,.41459,-.447214);vec4 a=floor(k+dot(k,vec4(.309017)));vec4 b=k-a+dot(a,d.xxxx);vec4 c;vec3 C=step(b.yzw,b.xxx);vec3 u=step(b.zww,b.yyz);c.x=C.x+C.y+C.z;c.yzw=1.-C;c.y+=u.x+u.y;c.zw+=1.-u.xy;c.z+=u.z;c.w+=1.-u.z;vec4 e=clamp(c,0.,1.);vec4 f=clamp(c-1.,0.,1.);vec4 g=clamp(c-2.,0.,1.);vec4 v=b-g+d.xxxx;vec4 w=b-f+d.yyyy;vec4 x=b-e+d.zzzz;vec4 y=b+d.wwww;a=F(a);float H=n(n(n(n(a.w)+a.z)+a.y)+a.x);vec4 i=m(m(m(m(a.w+vec4(g.w,f.w,e.w,1.))+a.z+vec4(g.z,f.z,e.z,1.))+a.y+vec4(g.y,f.y,e.y,1.))+a.x+vec4(g.x,f.x,e.x,1.));vec4 h=vec4(1./294.,1./49.,1./7.,0.);vec4 p=j(H,h);vec4 r=j(i.x,h);vec4 s=j(i.y,h);vec4 t=j(i.z,h);vec4 D=j(i.w,h);vec4 E=G(vec4(dot(p,p),dot(r,r),dot(s,s),dot(t,t)));p*=E.x;r*=E.y;s*=E.z;t*=E.w;D*=J(dot(D,D));vec3 z=max(.6-vec3(dot(b,b),dot(v,v),dot(w,w)),0.);vec2 A=max(.6-vec2(dot(x,x),dot(y,y)),0.);z=z*z;A=A*A;return 49.*(dot(z*z,vec3(dot(p,b),dot(r,v),dot(s,w)))+dot(A*A,vec2(dot(t,x),dot(D,y))));}float l(float c,float a,float d,float b,float e){return b+(c-a)*(e-b)/(d-a);}void main(){vec3 b=vec3(0.);vec2 a=gl_FragCoord.xy*q.xy;vec3 c=vec3(se*q.z+a.y-a.x)+q.yzw;float h=o(vec4(a.x,a.y,c.x,tm*.5));float i=o(vec4(a.y,c.y,a.x,tm*.5));float k=o(vec4(c.z,a.x,a.y,tm*.5));vec3 d=vec3(h,i,k);vec4 e=texture2D(tx,vec2(vUv.x,.5));vec3 g=vec3(l(e.x,0.,1.,-.33,.33),l(e.y,0.,1.,-.33,.33),l(e.z,0.,1.,-.33,.33));vec3 f=normalize(d)*.45;if(sh<1./7.){b=d*.5+f*vec3(.1,1.,1.);}else if(sh<2./7.){b=d*.5+f*vec3(1.,.25,.25);}else if(sh<3./7.){b=d*.5+g;}else if(sh<4./7.){b=f;}else if(sh<5./7.){b=f*.75+g;}else if(sh<6./7.){b=.5*(f+g+d);}else{b=(f+g)*l(sin(tm*10.),-1.,1.,.25,.75);}float p=l(o(vec4(vUv.xy,-47.,tm)),-1.,1.,0.,5e-3);gl_FragColor=vec4(b,p);}",vert:d,attributes:{p:e},uniforms:{tm:x.prop("tm"),tx:x.prop("tx"),sh:x.prop("sh"),se:x.prop("se")},count:3}),w=x({frag:"precision highp float;uniform sampler2D tx,gT;uniform bool iL,iC;uniform float cO,rD,tm;uniform vec2 r;float j(vec3 a,vec3 b,float c){return length(a-b)-c;}float s(float a,float b){float c=iL?.3:.225,d=clamp(.5+.5*(b-a)/c,0.,1.);return mix(b,a,d)-c*d*(1.-d);}vec3 t(vec3 a,vec3 b,float c){return mix(dot(a,b)*b,a,cos(c))+sin(c)*cross(b,a);}float u(vec3 a){a=t(a,vec3(1.,0.,0.),fract(tm)*2.*3.141593*rD);float d=20.;for(int b=0;b<int(50.);b++){vec4 c=texture2D(tx,vec2((float(b)+.5)/50.,.5));float e=j(a,c.rgb,c.a);d=s(d,e);}return d;}mat3 k(vec3 c,vec3 d,vec3 e){vec3 a=normalize(d-c),b=normalize(cross(a,e)),f=normalize(cross(b,a));return mat3(b,f,a);}vec3 l(float a){return texture2D(gT,vec2(a,.5)).rgb;}void main(){vec3 c=vec3(1.,-1.,5.)*1.75,m=vec3(0.),n=vec3(1.,0.,0.);mat3 o=k(c,m,n);vec2 p=(-r.xy+2.*gl_FragCoord.xy)/r.y;float d=0.,g=0.;vec3 v=normalize(o*vec3(p,10.)),h=c,a=vec3(0),b;float e=0.,f=0.;iC?(f=.5,e=floor((cO+.5)*6.)/6.+tm):(f=33.,e=tm+cO);for(float q=0.;q<60.;q++){d+=max(.00125,abs(g)*.8),h=c+v*d,g=u(h),b=vec3(max(0.,.01-abs(g))*.5);float i=smoothstep(30.,.1,d);vec3 r=l(i*f+e);b+=r*.8/5000.,b*=smoothstep(20.,7.,length(h)),b*=i,b*=r,a+=b;if(d>30.)break;}a=pow(a,vec3(.555556))*2.,a=pow(a,vec3(2.))*2.5,a=pow(a,vec3(.555556)),gl_FragColor=vec4(a,1.);}",vert:d,attributes:{p:e},uniforms:{tx:x.prop("tx"),gT:x.prop("gT"),cO:x.prop("cO"),rD:x.prop("rD"),iL:x.prop("iL"),iC:x.prop("iC"),tm:x.prop("tm"),r:x.prop("r")},count:3});function z(){return S^=S<<13,S^=S>>17,S^=S<<5,(S<0?1+~S:S)%1e3/1e3}function C(e){return D(T[e],0,255,0,1)}function D(t,a,c,o,f,r){if(Math.abs(a-c)<Number.EPSILON)return o;{let e=(t-a)/(c-a)*(f-o)+o;return r&&(f<o?e<f?e=f:e>o&&(e=o):e>f?e=f:e<o&&(e=o)),e}}let k=0,E=0,L=!1,Z=!1,A=!1,O=0,j=(g=[50,1],x.framebuffer({shape:g,color:x.texture({type:m,min:u,mag:u,shape:g})}));e="ff0000ff0000ffffffffffffffffffZebf5dfbad4aad4d4aaedb458e8871eZ141b41306bac6f9ceb98b9f2918ef4Z5872912f97c11ccad815e6cd0cf574Zb7d3f2afafdc8a84e284afe679beeeZf2ff49ff4242fb62f6645dd7b3fffcZ49494735ff6944ccff7494ead138bfZ485696e7e7e7f9c784fc7a1ef24c00Zaaff00ffaa00ff00aaaa00ff00aaffZ5b1d990074b400b34cffd41ffc6e3dZc200fbec0868fc2f00ec7d10ffbc0aZd8e2dcffffffffcad4f4acb79d8189Z507255488b494aad526eb257c5e063".split`Z`.map(e=>e.match(/.{6}/g));let T=function(t){let a=[];for(let e=0;e<32;e++)a.push(t.slice(2+2*e,4+2*e));return a.map(e=>parseInt(e,16))}(o),_=C(0),q=parseInt(o.slice(0,16),16)>>>0;q=(1664525*q+1013904223)%4294967296/4294967296;let S=parseInt(tokenData.hash.slice(0,16),16),U=C(1),F=function(t){var a,c;let o=[],f=0;for(let e=0;e<8;++e){var r=e/8;t[f+1][0]<r&&++f;var n=t[f+0],i=t[f+1],n=(a=n[1],c=i[1],n=(r-n[0])/(i[0]-n[0]),[a[0]*(1-n)+c[0]*n,a[1]*(1-n)+c[1]*n,a[2]*(1-n)+c[2]*n]);o.push(n[0],n[1],n[2],1)}return x.texture({width:8,height:1,data:o,type:m,min:u,mag:u,wrapS:"repeat"})}(function(a){var c=e=>e.match(/.{2}/g).map(e=>parseInt(e,16)/255);let o=[];for(let t=0;t<a.length;t++){let e=[];var f=t/a.length;e.push(f);f=c(a[t]);e.push([f[0],f[1],f[2]]),o.push(e)}return c(a[0]),o.push([1,o[0][1]]),o}(e[Math.min(e.length-1,Math.floor(C(2)*e.length))])),I=function(){let t=[];for(let e=0;e<64;++e)t.push(z(),z(),z(),1);return x.texture({width:64,height:1,data:t,type:m,min:u,mag:u,wrapS:"repeat"})}(),P=D(Math.floor(3*C(3)),0,2,-1,1),M=.5<C(4),H=C(5)<.1,R=.5<C(6)?.75:1.25;function $(e,t){l=e/f[c-1],i.width=i.height=l,i.style.width=i.style.height=e+"px",t&&x.poll()}function G(e){$(Math.min(t.innerWidth,t.innerHeight),e)}t.addEventListener("resize",G,!1);let K=0,N=0,B=45,J=55,W=navigator.userAgent,Q=-1!=W.indexOf("Safari")&&-1==W.indexOf("Chrome");e=t.location!==t.parent.location&&Q;e&&(B/=2,J/=2);let V=!r&&e;x.frame(({time:e,tick:t})=>{let a=((A?O:e)-E)*R;Z&&(b(!1),Z=!1),A&&$(Q?7200:5750,!0),L&&!A||(j.use(function(){x.clear({color:h,depth:1}),y({tx:I,sh:_,se:q,tm:.1*a})}),x.clear({color:h,depth:1}),w({tx:j,gT:F,cO:U,rD:P,iL:M,iC:H,tm:.05*a,r:[l,l]}),A&&(b(!0),G(),A=!1,L&&s()),K+=e-O,V||(30==t&&K/t<1/B?setTimeout(function(){p(2),N=t,K=0},0):60==t&&K/(t-N)<1/J&&setTimeout(function(){p(1)},0)),O=e)});